{"version":3,"file":"content.bundle.js","mappings":"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","sources":["webpack://notewise/webpack/bootstrap","webpack://notewise/webpack/runtime/define property getters","webpack://notewise/webpack/runtime/hasOwnProperty shorthand","webpack://notewise/webpack/runtime/make namespace object","webpack://notewise/./node_modules/openai/version.mjs","webpack://notewise/./node_modules/openai/_shims/registry.mjs","webpack://notewise/./node_modules/openai/_shims/MultipartBody.mjs","webpack://notewise/./node_modules/openai/_shims/index.mjs","webpack://notewise/./node_modules/openai/_shims/web-runtime.mjs","webpack://notewise/./node_modules/openai/error.mjs","webpack://notewise/./node_modules/openai/streaming.mjs","webpack://notewise/./node_modules/openai/uploads.mjs","webpack://notewise/./node_modules/openai/core.mjs","webpack://notewise/./node_modules/openai/pagination.mjs","webpack://notewise/./node_modules/openai/resource.mjs","webpack://notewise/./node_modules/openai/resources/completions.mjs","webpack://notewise/./node_modules/openai/resources/chat/completions.mjs","webpack://notewise/./node_modules/openai/resources/chat/chat.mjs","webpack://notewise/./node_modules/openai/resources/edits.mjs","webpack://notewise/./node_modules/openai/resources/embeddings.mjs","webpack://notewise/./node_modules/openai/resources/files.mjs","webpack://notewise/./node_modules/openai/resources/images.mjs","webpack://notewise/./node_modules/openai/resources/audio/speech.mjs","webpack://notewise/./node_modules/openai/resources/audio/transcriptions.mjs","webpack://notewise/./node_modules/openai/resources/audio/translations.mjs","webpack://notewise/./node_modules/openai/resources/audio/audio.mjs","webpack://notewise/./node_modules/openai/resources/moderations.mjs","webpack://notewise/./node_modules/openai/resources/models.mjs","webpack://notewise/./node_modules/openai/resources/fine-tuning/jobs.mjs","webpack://notewise/./node_modules/openai/resources/fine-tuning/fine-tuning.mjs","webpack://notewise/./node_modules/openai/resources/fine-tunes.mjs","webpack://notewise/./node_modules/openai/resources/beta/assistants/files.mjs","webpack://notewise/./node_modules/openai/resources/beta/assistants/assistants.mjs","webpack://notewise/./node_modules/openai/lib/RunnableFunction.mjs","webpack://notewise/./node_modules/openai/lib/chatCompletionUtils.mjs","webpack://notewise/./node_modules/openai/lib/AbstractChatCompletionRunner.mjs","webpack://notewise/./node_modules/openai/lib/ChatCompletionRunner.mjs","webpack://notewise/./node_modules/openai/lib/ChatCompletionStream.mjs","webpack://notewise/./node_modules/openai/index.mjs","webpack://notewise/./node_modules/openai/lib/ChatCompletionStreamingRunner.mjs","webpack://notewise/./node_modules/openai/resources/beta/chat/completions.mjs","webpack://notewise/./node_modules/openai/resources/beta/chat/chat.mjs","webpack://notewise/./node_modules/openai/resources/beta/threads/messages/files.mjs","webpack://notewise/./node_modules/openai/resources/beta/threads/messages/messages.mjs","webpack://notewise/./node_modules/openai/resources/beta/threads/runs/steps.mjs","webpack://notewise/./node_modules/openai/resources/beta/threads/runs/runs.mjs","webpack://notewise/./node_modules/openai/resources/beta/threads/threads.mjs","webpack://notewise/./node_modules/openai/resources/beta/beta.mjs","webpack://notewise/./content.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const VERSION = '4.19.0'; // x-release-please-version\r\n//# sourceMappingURL=version.mjs.map","export let auto = false;\r\nexport let kind = undefined;\r\nexport let fetch = undefined;\r\nexport let Request = undefined;\r\nexport let Response = undefined;\r\nexport let Headers = undefined;\r\nexport let FormData = undefined;\r\nexport let Blob = undefined;\r\nexport let File = undefined;\r\nexport let ReadableStream = undefined;\r\nexport let getMultipartRequestOptions = undefined;\r\nexport let getDefaultAgent = undefined;\r\nexport let fileFromPath = undefined;\r\nexport let isFsReadStream = undefined;\r\nexport function setShims(shims, options = { auto: false }) {\r\n    if (auto) {\r\n        throw new Error(`you must \\`import 'openai/shims/${shims.kind}'\\` before importing anything else from openai`);\r\n    }\r\n    if (kind) {\r\n        throw new Error(`can't \\`import 'openai/shims/${shims.kind}'\\` after \\`import 'openai/shims/${kind}'\\``);\r\n    }\r\n    auto = options.auto;\r\n    kind = shims.kind;\r\n    fetch = shims.fetch;\r\n    Request = shims.Request;\r\n    Response = shims.Response;\r\n    Headers = shims.Headers;\r\n    FormData = shims.FormData;\r\n    Blob = shims.Blob;\r\n    File = shims.File;\r\n    ReadableStream = shims.ReadableStream;\r\n    getMultipartRequestOptions = shims.getMultipartRequestOptions;\r\n    getDefaultAgent = shims.getDefaultAgent;\r\n    fileFromPath = shims.fileFromPath;\r\n    isFsReadStream = shims.isFsReadStream;\r\n}\r\n//# sourceMappingURL=registry.mjs.map","/**\r\n * Disclaimer: modules in _shims aren't intended to be imported by SDK users.\r\n */\r\nexport class MultipartBody {\r\n    constructor(body) {\r\n        this.body = body;\r\n    }\r\n    get [Symbol.toStringTag]() {\r\n        return 'MultipartBody';\r\n    }\r\n}\r\n//# sourceMappingURL=MultipartBody.mjs.map","/**\r\n * Disclaimer: modules in _shims aren't intended to be imported by SDK users.\r\n */\r\nimport * as shims from './registry.mjs';\r\nimport * as auto from 'openai/_shims/auto/runtime';\r\nif (!shims.kind) shims.setShims(auto.getRuntime(), { auto: true });\r\nexport * from './registry.mjs';\r\n","import { MultipartBody } from \"./MultipartBody.mjs\";\r\nexport function getRuntime({ manuallyImported } = {}) {\r\n    const recommendation = manuallyImported ?\r\n        `You may need to use polyfills`\r\n        : `Add one of these imports before your first \\`import … from 'openai'\\`:\r\n- \\`import 'openai/shims/node'\\` (if you're running on Node)\r\n- \\`import 'openai/shims/web'\\` (otherwise)\r\n`;\r\n    let _fetch, _Request, _Response, _Headers;\r\n    try {\r\n        // @ts-ignore\r\n        _fetch = fetch;\r\n        // @ts-ignore\r\n        _Request = Request;\r\n        // @ts-ignore\r\n        _Response = Response;\r\n        // @ts-ignore\r\n        _Headers = Headers;\r\n    }\r\n    catch (error) {\r\n        throw new Error(`this environment is missing the following Web Fetch API type: ${error.message}. ${recommendation}`);\r\n    }\r\n    return {\r\n        kind: 'web',\r\n        fetch: _fetch,\r\n        Request: _Request,\r\n        Response: _Response,\r\n        Headers: _Headers,\r\n        FormData: \r\n        // @ts-ignore\r\n        typeof FormData !== 'undefined' ? FormData : (class FormData {\r\n            // @ts-ignore\r\n            constructor() {\r\n                throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${recommendation}`);\r\n            }\r\n        }),\r\n        Blob: typeof Blob !== 'undefined' ? Blob : (class Blob {\r\n            constructor() {\r\n                throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${recommendation}`);\r\n            }\r\n        }),\r\n        File: \r\n        // @ts-ignore\r\n        typeof File !== 'undefined' ? File : (class File {\r\n            // @ts-ignore\r\n            constructor() {\r\n                throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${recommendation}`);\r\n            }\r\n        }),\r\n        ReadableStream: \r\n        // @ts-ignore\r\n        typeof ReadableStream !== 'undefined' ? ReadableStream : (class ReadableStream {\r\n            // @ts-ignore\r\n            constructor() {\r\n                throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${recommendation}`);\r\n            }\r\n        }),\r\n        getMultipartRequestOptions: async (\r\n        // @ts-ignore\r\n        form, opts) => ({\r\n            ...opts,\r\n            body: new MultipartBody(form),\r\n        }),\r\n        getDefaultAgent: (url) => undefined,\r\n        fileFromPath: () => {\r\n            throw new Error('The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads');\r\n        },\r\n        isFsReadStream: (value) => false,\r\n    };\r\n}\r\n//# sourceMappingURL=web-runtime.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { castToError } from \"./core.mjs\";\r\nexport class OpenAIError extends Error {\r\n}\r\nexport class APIError extends OpenAIError {\r\n    constructor(status, error, message, headers) {\r\n        super(`${APIError.makeMessage(status, error, message)}`);\r\n        this.status = status;\r\n        this.headers = headers;\r\n        const data = error;\r\n        this.error = data;\r\n        this.code = data?.['code'];\r\n        this.param = data?.['param'];\r\n        this.type = data?.['type'];\r\n    }\r\n    static makeMessage(status, error, message) {\r\n        const msg = error?.message ?\r\n            typeof error.message === 'string' ? error.message\r\n                : JSON.stringify(error.message)\r\n            : error ? JSON.stringify(error)\r\n                : message;\r\n        if (status && msg) {\r\n            return `${status} ${msg}`;\r\n        }\r\n        if (status) {\r\n            return `${status} status code (no body)`;\r\n        }\r\n        if (msg) {\r\n            return msg;\r\n        }\r\n        return '(no status code or body)';\r\n    }\r\n    static generate(status, errorResponse, message, headers) {\r\n        if (!status) {\r\n            return new APIConnectionError({ cause: castToError(errorResponse) });\r\n        }\r\n        const error = errorResponse?.['error'];\r\n        if (status === 400) {\r\n            return new BadRequestError(status, error, message, headers);\r\n        }\r\n        if (status === 401) {\r\n            return new AuthenticationError(status, error, message, headers);\r\n        }\r\n        if (status === 403) {\r\n            return new PermissionDeniedError(status, error, message, headers);\r\n        }\r\n        if (status === 404) {\r\n            return new NotFoundError(status, error, message, headers);\r\n        }\r\n        if (status === 409) {\r\n            return new ConflictError(status, error, message, headers);\r\n        }\r\n        if (status === 422) {\r\n            return new UnprocessableEntityError(status, error, message, headers);\r\n        }\r\n        if (status === 429) {\r\n            return new RateLimitError(status, error, message, headers);\r\n        }\r\n        if (status >= 500) {\r\n            return new InternalServerError(status, error, message, headers);\r\n        }\r\n        return new APIError(status, error, message, headers);\r\n    }\r\n}\r\nexport class APIUserAbortError extends APIError {\r\n    constructor({ message } = {}) {\r\n        super(undefined, undefined, message || 'Request was aborted.', undefined);\r\n        this.status = undefined;\r\n    }\r\n}\r\nexport class APIConnectionError extends APIError {\r\n    constructor({ message, cause }) {\r\n        super(undefined, undefined, message || 'Connection error.', undefined);\r\n        this.status = undefined;\r\n        // in some environments the 'cause' property is already declared\r\n        // @ts-ignore\r\n        if (cause)\r\n            this.cause = cause;\r\n    }\r\n}\r\nexport class APIConnectionTimeoutError extends APIConnectionError {\r\n    constructor({ message } = {}) {\r\n        super({ message: message ?? 'Request timed out.' });\r\n    }\r\n}\r\nexport class BadRequestError extends APIError {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.status = 400;\r\n    }\r\n}\r\nexport class AuthenticationError extends APIError {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.status = 401;\r\n    }\r\n}\r\nexport class PermissionDeniedError extends APIError {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.status = 403;\r\n    }\r\n}\r\nexport class NotFoundError extends APIError {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.status = 404;\r\n    }\r\n}\r\nexport class ConflictError extends APIError {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.status = 409;\r\n    }\r\n}\r\nexport class UnprocessableEntityError extends APIError {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.status = 422;\r\n    }\r\n}\r\nexport class RateLimitError extends APIError {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.status = 429;\r\n    }\r\n}\r\nexport class InternalServerError extends APIError {\r\n}\r\n//# sourceMappingURL=error.mjs.map","import { ReadableStream } from \"./_shims/index.mjs\";\r\nimport { OpenAIError } from \"./error.mjs\";\r\nimport { APIError } from 'openai/error';\r\nexport class Stream {\r\n    constructor(iterator, controller) {\r\n        this.iterator = iterator;\r\n        this.controller = controller;\r\n    }\r\n    static fromSSEResponse(response, controller) {\r\n        let consumed = false;\r\n        const decoder = new SSEDecoder();\r\n        async function* iterMessages() {\r\n            if (!response.body) {\r\n                controller.abort();\r\n                throw new OpenAIError(`Attempted to iterate over a response with no body`);\r\n            }\r\n            const lineDecoder = new LineDecoder();\r\n            const iter = readableStreamAsyncIterable(response.body);\r\n            for await (const chunk of iter) {\r\n                for (const line of lineDecoder.decode(chunk)) {\r\n                    const sse = decoder.decode(line);\r\n                    if (sse)\r\n                        yield sse;\r\n                }\r\n            }\r\n            for (const line of lineDecoder.flush()) {\r\n                const sse = decoder.decode(line);\r\n                if (sse)\r\n                    yield sse;\r\n            }\r\n        }\r\n        async function* iterator() {\r\n            if (consumed) {\r\n                throw new Error('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\r\n            }\r\n            consumed = true;\r\n            let done = false;\r\n            try {\r\n                for await (const sse of iterMessages()) {\r\n                    if (done)\r\n                        continue;\r\n                    if (sse.data.startsWith('[DONE]')) {\r\n                        done = true;\r\n                        continue;\r\n                    }\r\n                    if (sse.event === null) {\r\n                        let data;\r\n                        try {\r\n                            data = JSON.parse(sse.data);\r\n                        }\r\n                        catch (e) {\r\n                            console.error(`Could not parse message into JSON:`, sse.data);\r\n                            console.error(`From chunk:`, sse.raw);\r\n                            throw e;\r\n                        }\r\n                        if (data && data.error) {\r\n                            throw new APIError(undefined, data.error, undefined, undefined);\r\n                        }\r\n                        yield data;\r\n                    }\r\n                }\r\n                done = true;\r\n            }\r\n            catch (e) {\r\n                // If the user calls `stream.controller.abort()`, we should exit without throwing.\r\n                if (e instanceof Error && e.name === 'AbortError')\r\n                    return;\r\n                throw e;\r\n            }\r\n            finally {\r\n                // If the user `break`s, abort the ongoing request.\r\n                if (!done)\r\n                    controller.abort();\r\n            }\r\n        }\r\n        return new Stream(iterator, controller);\r\n    }\r\n    /**\r\n     * Generates a Stream from a newline-separated ReadableStream\r\n     * where each item is a JSON value.\r\n     */\r\n    static fromReadableStream(readableStream, controller) {\r\n        let consumed = false;\r\n        async function* iterLines() {\r\n            const lineDecoder = new LineDecoder();\r\n            const iter = readableStreamAsyncIterable(readableStream);\r\n            for await (const chunk of iter) {\r\n                for (const line of lineDecoder.decode(chunk)) {\r\n                    yield line;\r\n                }\r\n            }\r\n            for (const line of lineDecoder.flush()) {\r\n                yield line;\r\n            }\r\n        }\r\n        async function* iterator() {\r\n            if (consumed) {\r\n                throw new Error('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\r\n            }\r\n            consumed = true;\r\n            let done = false;\r\n            try {\r\n                for await (const line of iterLines()) {\r\n                    if (done)\r\n                        continue;\r\n                    if (line)\r\n                        yield JSON.parse(line);\r\n                }\r\n                done = true;\r\n            }\r\n            catch (e) {\r\n                // If the user calls `stream.controller.abort()`, we should exit without throwing.\r\n                if (e instanceof Error && e.name === 'AbortError')\r\n                    return;\r\n                throw e;\r\n            }\r\n            finally {\r\n                // If the user `break`s, abort the ongoing request.\r\n                if (!done)\r\n                    controller.abort();\r\n            }\r\n        }\r\n        return new Stream(iterator, controller);\r\n    }\r\n    [Symbol.asyncIterator]() {\r\n        return this.iterator();\r\n    }\r\n    /**\r\n     * Splits the stream into two streams which can be\r\n     * independently read from at different speeds.\r\n     */\r\n    tee() {\r\n        const left = [];\r\n        const right = [];\r\n        const iterator = this.iterator();\r\n        const teeIterator = (queue) => {\r\n            return {\r\n                next: () => {\r\n                    if (queue.length === 0) {\r\n                        const result = iterator.next();\r\n                        left.push(result);\r\n                        right.push(result);\r\n                    }\r\n                    return queue.shift();\r\n                },\r\n            };\r\n        };\r\n        return [\r\n            new Stream(() => teeIterator(left), this.controller),\r\n            new Stream(() => teeIterator(right), this.controller),\r\n        ];\r\n    }\r\n    /**\r\n     * Converts this stream to a newline-separated ReadableStream of\r\n     * JSON stringified values in the stream\r\n     * which can be turned back into a Stream with `Stream.fromReadableStream()`.\r\n     */\r\n    toReadableStream() {\r\n        const self = this;\r\n        let iter;\r\n        const encoder = new TextEncoder();\r\n        return new ReadableStream({\r\n            async start() {\r\n                iter = self[Symbol.asyncIterator]();\r\n            },\r\n            async pull(ctrl) {\r\n                try {\r\n                    const { value, done } = await iter.next();\r\n                    if (done)\r\n                        return ctrl.close();\r\n                    const bytes = encoder.encode(JSON.stringify(value) + '\\n');\r\n                    ctrl.enqueue(bytes);\r\n                }\r\n                catch (err) {\r\n                    ctrl.error(err);\r\n                }\r\n            },\r\n            async cancel() {\r\n                await iter.return?.();\r\n            },\r\n        });\r\n    }\r\n}\r\nclass SSEDecoder {\r\n    constructor() {\r\n        this.event = null;\r\n        this.data = [];\r\n        this.chunks = [];\r\n    }\r\n    decode(line) {\r\n        if (line.endsWith('\\r')) {\r\n            line = line.substring(0, line.length - 1);\r\n        }\r\n        if (!line) {\r\n            // empty line and we didn't previously encounter any messages\r\n            if (!this.event && !this.data.length)\r\n                return null;\r\n            const sse = {\r\n                event: this.event,\r\n                data: this.data.join('\\n'),\r\n                raw: this.chunks,\r\n            };\r\n            this.event = null;\r\n            this.data = [];\r\n            this.chunks = [];\r\n            return sse;\r\n        }\r\n        this.chunks.push(line);\r\n        if (line.startsWith(':')) {\r\n            return null;\r\n        }\r\n        let [fieldname, _, value] = partition(line, ':');\r\n        if (value.startsWith(' ')) {\r\n            value = value.substring(1);\r\n        }\r\n        if (fieldname === 'event') {\r\n            this.event = value;\r\n        }\r\n        else if (fieldname === 'data') {\r\n            this.data.push(value);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * A re-implementation of httpx's `LineDecoder` in Python that handles incrementally\r\n * reading lines from text.\r\n *\r\n * https://github.com/encode/httpx/blob/920333ea98118e9cf617f246905d7b202510941c/httpx/_decoders.py#L258\r\n */\r\nclass LineDecoder {\r\n    constructor() {\r\n        this.buffer = [];\r\n        this.trailingCR = false;\r\n    }\r\n    decode(chunk) {\r\n        let text = this.decodeText(chunk);\r\n        if (this.trailingCR) {\r\n            text = '\\r' + text;\r\n            this.trailingCR = false;\r\n        }\r\n        if (text.endsWith('\\r')) {\r\n            this.trailingCR = true;\r\n            text = text.slice(0, -1);\r\n        }\r\n        if (!text) {\r\n            return [];\r\n        }\r\n        const trailingNewline = LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || '');\r\n        let lines = text.split(LineDecoder.NEWLINE_REGEXP);\r\n        if (lines.length === 1 && !trailingNewline) {\r\n            this.buffer.push(lines[0]);\r\n            return [];\r\n        }\r\n        if (this.buffer.length > 0) {\r\n            lines = [this.buffer.join('') + lines[0], ...lines.slice(1)];\r\n            this.buffer = [];\r\n        }\r\n        if (!trailingNewline) {\r\n            this.buffer = [lines.pop() || ''];\r\n        }\r\n        return lines;\r\n    }\r\n    decodeText(bytes) {\r\n        if (bytes == null)\r\n            return '';\r\n        if (typeof bytes === 'string')\r\n            return bytes;\r\n        // Node:\r\n        if (typeof Buffer !== 'undefined') {\r\n            if (bytes instanceof Buffer) {\r\n                return bytes.toString();\r\n            }\r\n            if (bytes instanceof Uint8Array) {\r\n                return Buffer.from(bytes).toString();\r\n            }\r\n            throw new OpenAIError(`Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global \"Buffer\" defined, which this library assumes to be Node. Please report this error.`);\r\n        }\r\n        // Browser\r\n        if (typeof TextDecoder !== 'undefined') {\r\n            if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {\r\n                this.textDecoder ?? (this.textDecoder = new TextDecoder('utf8'));\r\n                return this.textDecoder.decode(bytes);\r\n            }\r\n            throw new OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`);\r\n        }\r\n        throw new OpenAIError(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`);\r\n    }\r\n    flush() {\r\n        if (!this.buffer.length && !this.trailingCR) {\r\n            return [];\r\n        }\r\n        const lines = [this.buffer.join('')];\r\n        this.buffer = [];\r\n        this.trailingCR = false;\r\n        return lines;\r\n    }\r\n}\r\n// prettier-ignore\r\nLineDecoder.NEWLINE_CHARS = new Set(['\\n', '\\r', '\\x0b', '\\x0c', '\\x1c', '\\x1d', '\\x1e', '\\x85', '\\u2028', '\\u2029']);\r\nLineDecoder.NEWLINE_REGEXP = /\\r\\n|[\\n\\r\\x0b\\x0c\\x1c\\x1d\\x1e\\x85\\u2028\\u2029]/g;\r\nfunction partition(str, delimiter) {\r\n    const index = str.indexOf(delimiter);\r\n    if (index !== -1) {\r\n        return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];\r\n    }\r\n    return [str, '', ''];\r\n}\r\n/**\r\n * Most browsers don't yet have async iterable support for ReadableStream,\r\n * and Node has a very different way of reading bytes from its \"ReadableStream\".\r\n *\r\n * This polyfill was pulled from https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\r\n */\r\nfunction readableStreamAsyncIterable(stream) {\r\n    if (stream[Symbol.asyncIterator])\r\n        return stream;\r\n    const reader = stream.getReader();\r\n    return {\r\n        async next() {\r\n            try {\r\n                const result = await reader.read();\r\n                if (result?.done)\r\n                    reader.releaseLock(); // release lock when stream becomes closed\r\n                return result;\r\n            }\r\n            catch (e) {\r\n                reader.releaseLock(); // release lock when stream becomes errored\r\n                throw e;\r\n            }\r\n        },\r\n        async return() {\r\n            const cancelPromise = reader.cancel();\r\n            reader.releaseLock();\r\n            await cancelPromise;\r\n            return { done: true, value: undefined };\r\n        },\r\n        [Symbol.asyncIterator]() {\r\n            return this;\r\n        },\r\n    };\r\n}\r\n//# sourceMappingURL=streaming.mjs.map","import { FormData, File, getMultipartRequestOptions, isFsReadStream, } from \"./_shims/index.mjs\";\r\nexport { fileFromPath } from \"./_shims/index.mjs\";\r\nexport const isResponseLike = (value) => value != null &&\r\n    typeof value === 'object' &&\r\n    typeof value.url === 'string' &&\r\n    typeof value.blob === 'function';\r\nexport const isFileLike = (value) => value != null &&\r\n    typeof value === 'object' &&\r\n    typeof value.name === 'string' &&\r\n    typeof value.lastModified === 'number' &&\r\n    isBlobLike(value);\r\n/**\r\n * The BlobLike type omits arrayBuffer() because @types/node-fetch@^2.6.4 lacks it; but this check\r\n * adds the arrayBuffer() method type because it is available and used at runtime\r\n */\r\nexport const isBlobLike = (value) => value != null &&\r\n    typeof value === 'object' &&\r\n    typeof value.size === 'number' &&\r\n    typeof value.type === 'string' &&\r\n    typeof value.text === 'function' &&\r\n    typeof value.slice === 'function' &&\r\n    typeof value.arrayBuffer === 'function';\r\nexport const isUploadable = (value) => {\r\n    return isFileLike(value) || isResponseLike(value) || isFsReadStream(value);\r\n};\r\n/**\r\n * Helper for creating a {@link File} to pass to an SDK upload method from a variety of different data formats\r\n * @param value the raw content of the file.  Can be an {@link Uploadable}, {@link BlobLikePart}, or {@link AsyncIterable} of {@link BlobLikePart}s\r\n * @param {string=} name the name of the file. If omitted, toFile will try to determine a file name from bits if possible\r\n * @param {Object=} options additional properties\r\n * @param {string=} options.type the MIME type of the content\r\n * @param {number=} options.lastModified the last modified timestamp\r\n * @returns a {@link File} with the given properties\r\n */\r\nexport async function toFile(value, name, options = {}) {\r\n    // If it's a promise, resolve it.\r\n    value = await value;\r\n    if (isResponseLike(value)) {\r\n        const blob = await value.blob();\r\n        name || (name = new URL(value.url).pathname.split(/[\\\\/]/).pop() ?? 'unknown_file');\r\n        return new File([blob], name, options);\r\n    }\r\n    const bits = await getBytes(value);\r\n    name || (name = getName(value) ?? 'unknown_file');\r\n    if (!options.type) {\r\n        const type = bits[0]?.type;\r\n        if (typeof type === 'string') {\r\n            options = { ...options, type };\r\n        }\r\n    }\r\n    return new File(bits, name, options);\r\n}\r\nasync function getBytes(value) {\r\n    let parts = [];\r\n    if (typeof value === 'string' ||\r\n        ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.\r\n        value instanceof ArrayBuffer) {\r\n        parts.push(value);\r\n    }\r\n    else if (isBlobLike(value)) {\r\n        parts.push(await value.arrayBuffer());\r\n    }\r\n    else if (isAsyncIterableIterator(value) // includes Readable, ReadableStream, etc.\r\n    ) {\r\n        for await (const chunk of value) {\r\n            parts.push(chunk); // TODO, consider validating?\r\n        }\r\n    }\r\n    else {\r\n        throw new Error(`Unexpected data type: ${typeof value}; constructor: ${value?.constructor?.name}; props: ${propsForError(value)}`);\r\n    }\r\n    return parts;\r\n}\r\nfunction propsForError(value) {\r\n    const props = Object.getOwnPropertyNames(value);\r\n    return `[${props.map((p) => `\"${p}\"`).join(', ')}]`;\r\n}\r\nfunction getName(value) {\r\n    return (getStringFromMaybeBuffer(value.name) ||\r\n        getStringFromMaybeBuffer(value.filename) ||\r\n        // For fs.ReadStream\r\n        getStringFromMaybeBuffer(value.path)?.split(/[\\\\/]/).pop());\r\n}\r\nconst getStringFromMaybeBuffer = (x) => {\r\n    if (typeof x === 'string')\r\n        return x;\r\n    if (typeof Buffer !== 'undefined' && x instanceof Buffer)\r\n        return String(x);\r\n    return undefined;\r\n};\r\nconst isAsyncIterableIterator = (value) => value != null && typeof value === 'object' && typeof value[Symbol.asyncIterator] === 'function';\r\nexport const isMultipartBody = (body) => body && typeof body === 'object' && body.body && body[Symbol.toStringTag] === 'MultipartBody';\r\n/**\r\n * Returns a multipart/form-data request if any part of the given request body contains a File / Blob value.\r\n * Otherwise returns the request as is.\r\n */\r\nexport const maybeMultipartFormRequestOptions = async (opts) => {\r\n    if (!hasUploadableValue(opts.body))\r\n        return opts;\r\n    const form = await createForm(opts.body);\r\n    return getMultipartRequestOptions(form, opts);\r\n};\r\nexport const multipartFormRequestOptions = async (opts) => {\r\n    const form = await createForm(opts.body);\r\n    return getMultipartRequestOptions(form, opts);\r\n};\r\nexport const createForm = async (body) => {\r\n    const form = new FormData();\r\n    await Promise.all(Object.entries(body || {}).map(([key, value]) => addFormValue(form, key, value)));\r\n    return form;\r\n};\r\nconst hasUploadableValue = (value) => {\r\n    if (isUploadable(value))\r\n        return true;\r\n    if (Array.isArray(value))\r\n        return value.some(hasUploadableValue);\r\n    if (value && typeof value === 'object') {\r\n        for (const k in value) {\r\n            if (hasUploadableValue(value[k]))\r\n                return true;\r\n        }\r\n    }\r\n    return false;\r\n};\r\nconst addFormValue = async (form, key, value) => {\r\n    if (value === undefined)\r\n        return;\r\n    if (value == null) {\r\n        throw new TypeError(`Received null for \"${key}\"; to pass null in FormData, you must use the string 'null'`);\r\n    }\r\n    // TODO: make nested formats configurable\r\n    if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\r\n        form.append(key, String(value));\r\n    }\r\n    else if (isUploadable(value)) {\r\n        const file = await toFile(value);\r\n        form.append(key, file);\r\n    }\r\n    else if (Array.isArray(value)) {\r\n        await Promise.all(value.map((entry) => addFormValue(form, key + '[]', entry)));\r\n    }\r\n    else if (typeof value === 'object') {\r\n        await Promise.all(Object.entries(value).map(([name, prop]) => addFormValue(form, `${key}[${name}]`, prop)));\r\n    }\r\n    else {\r\n        throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${value} instead`);\r\n    }\r\n};\r\n//# sourceMappingURL=uploads.mjs.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _AbstractPage_client;\r\nimport { VERSION } from \"./version.mjs\";\r\nimport { Stream } from \"./streaming.mjs\";\r\nimport { OpenAIError, APIError, APIConnectionError, APIConnectionTimeoutError, APIUserAbortError, } from \"./error.mjs\";\r\nimport { kind as shimsKind, getDefaultAgent, fetch, } from \"./_shims/index.mjs\";\r\nimport { isMultipartBody } from \"./uploads.mjs\";\r\nexport { maybeMultipartFormRequestOptions, multipartFormRequestOptions, createForm, } from \"./uploads.mjs\";\r\nasync function defaultParseResponse(props) {\r\n    const { response } = props;\r\n    if (props.options.stream) {\r\n        debug('response', response.status, response.url, response.headers, response.body);\r\n        // Note: there is an invariant here that isn't represented in the type system\r\n        // that if you set `stream: true` the response type must also be `Stream<T>`\r\n        return Stream.fromSSEResponse(response, props.controller);\r\n    }\r\n    // fetch refuses to read the body when the status code is 204.\r\n    if (response.status === 204) {\r\n        return null;\r\n    }\r\n    if (props.options.__binaryResponse) {\r\n        return response;\r\n    }\r\n    const contentType = response.headers.get('content-type');\r\n    if (contentType?.includes('application/json')) {\r\n        const json = await response.json();\r\n        debug('response', response.status, response.url, response.headers, json);\r\n        return json;\r\n    }\r\n    const text = await response.text();\r\n    debug('response', response.status, response.url, response.headers, text);\r\n    // TODO handle blob, arraybuffer, other content types, etc.\r\n    return text;\r\n}\r\n/**\r\n * A subclass of `Promise` providing additional helper methods\r\n * for interacting with the SDK.\r\n */\r\nexport class APIPromise extends Promise {\r\n    constructor(responsePromise, parseResponse = defaultParseResponse) {\r\n        super((resolve) => {\r\n            // this is maybe a bit weird but this has to be a no-op to not implicitly\r\n            // parse the response body; instead .then, .catch, .finally are overridden\r\n            // to parse the response\r\n            resolve(null);\r\n        });\r\n        this.responsePromise = responsePromise;\r\n        this.parseResponse = parseResponse;\r\n    }\r\n    _thenUnwrap(transform) {\r\n        return new APIPromise(this.responsePromise, async (props) => transform(await this.parseResponse(props)));\r\n    }\r\n    /**\r\n     * Gets the raw `Response` instance instead of parsing the response\r\n     * data.\r\n     *\r\n     * If you want to parse the response body but still get the `Response`\r\n     * instance, you can use {@link withResponse()}.\r\n     *\r\n     * 👋 Getting the wrong TypeScript type for `Response`?\r\n     * Try setting `\"moduleResolution\": \"NodeNext\"` if you can,\r\n     * or add one of these imports before your first `import … from 'openai'`:\r\n     * - `import 'openai/shims/node'` (if you're running on Node)\r\n     * - `import 'openai/shims/web'` (otherwise)\r\n     */\r\n    asResponse() {\r\n        return this.responsePromise.then((p) => p.response);\r\n    }\r\n    /**\r\n     * Gets the parsed response data and the raw `Response` instance.\r\n     *\r\n     * If you just want to get the raw `Response` instance without parsing it,\r\n     * you can use {@link asResponse()}.\r\n     *\r\n     *\r\n     * 👋 Getting the wrong TypeScript type for `Response`?\r\n     * Try setting `\"moduleResolution\": \"NodeNext\"` if you can,\r\n     * or add one of these imports before your first `import … from 'openai'`:\r\n     * - `import 'openai/shims/node'` (if you're running on Node)\r\n     * - `import 'openai/shims/web'` (otherwise)\r\n     */\r\n    async withResponse() {\r\n        const [data, response] = await Promise.all([this.parse(), this.asResponse()]);\r\n        return { data, response };\r\n    }\r\n    parse() {\r\n        if (!this.parsedPromise) {\r\n            this.parsedPromise = this.responsePromise.then(this.parseResponse);\r\n        }\r\n        return this.parsedPromise;\r\n    }\r\n    then(onfulfilled, onrejected) {\r\n        return this.parse().then(onfulfilled, onrejected);\r\n    }\r\n    catch(onrejected) {\r\n        return this.parse().catch(onrejected);\r\n    }\r\n    finally(onfinally) {\r\n        return this.parse().finally(onfinally);\r\n    }\r\n}\r\nexport class APIClient {\r\n    constructor({ baseURL, maxRetries = 2, timeout = 600000, // 10 minutes\r\n    httpAgent, fetch: overridenFetch, }) {\r\n        this.baseURL = baseURL;\r\n        this.maxRetries = validatePositiveInteger('maxRetries', maxRetries);\r\n        this.timeout = validatePositiveInteger('timeout', timeout);\r\n        this.httpAgent = httpAgent;\r\n        this.fetch = overridenFetch ?? fetch;\r\n    }\r\n    authHeaders(opts) {\r\n        return {};\r\n    }\r\n    /**\r\n     * Override this to add your own default headers, for example:\r\n     *\r\n     *  {\r\n     *    ...super.defaultHeaders(),\r\n     *    Authorization: 'Bearer 123',\r\n     *  }\r\n     */\r\n    defaultHeaders(opts) {\r\n        return {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'User-Agent': this.getUserAgent(),\r\n            ...getPlatformHeaders(),\r\n            ...this.authHeaders(opts),\r\n        };\r\n    }\r\n    /**\r\n     * Override this to add your own headers validation:\r\n     */\r\n    validateHeaders(headers, customHeaders) { }\r\n    defaultIdempotencyKey() {\r\n        return `stainless-node-retry-${uuid4()}`;\r\n    }\r\n    get(path, opts) {\r\n        return this.methodRequest('get', path, opts);\r\n    }\r\n    post(path, opts) {\r\n        return this.methodRequest('post', path, opts);\r\n    }\r\n    patch(path, opts) {\r\n        return this.methodRequest('patch', path, opts);\r\n    }\r\n    put(path, opts) {\r\n        return this.methodRequest('put', path, opts);\r\n    }\r\n    delete(path, opts) {\r\n        return this.methodRequest('delete', path, opts);\r\n    }\r\n    methodRequest(method, path, opts) {\r\n        return this.request(Promise.resolve(opts).then((opts) => ({ method, path, ...opts })));\r\n    }\r\n    getAPIList(path, Page, opts) {\r\n        return this.requestAPIList(Page, { method: 'get', path, ...opts });\r\n    }\r\n    calculateContentLength(body) {\r\n        if (typeof body === 'string') {\r\n            if (typeof Buffer !== 'undefined') {\r\n                return Buffer.byteLength(body, 'utf8').toString();\r\n            }\r\n            if (typeof TextEncoder !== 'undefined') {\r\n                const encoder = new TextEncoder();\r\n                const encoded = encoder.encode(body);\r\n                return encoded.length.toString();\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    buildRequest(options) {\r\n        const { method, path, query, headers: headers = {} } = options;\r\n        const body = isMultipartBody(options.body) ? options.body.body\r\n            : options.body ? JSON.stringify(options.body, null, 2)\r\n                : null;\r\n        const contentLength = this.calculateContentLength(body);\r\n        const url = this.buildURL(path, query);\r\n        if ('timeout' in options)\r\n            validatePositiveInteger('timeout', options.timeout);\r\n        const timeout = options.timeout ?? this.timeout;\r\n        const httpAgent = options.httpAgent ?? this.httpAgent ?? getDefaultAgent(url);\r\n        const minAgentTimeout = timeout + 1000;\r\n        if (typeof httpAgent?.options?.timeout === 'number' &&\r\n            minAgentTimeout > (httpAgent.options.timeout ?? 0)) {\r\n            // Allow any given request to bump our agent active socket timeout.\r\n            // This may seem strange, but leaking active sockets should be rare and not particularly problematic,\r\n            // and without mutating agent we would need to create more of them.\r\n            // This tradeoff optimizes for performance.\r\n            httpAgent.options.timeout = minAgentTimeout;\r\n        }\r\n        if (this.idempotencyHeader && method !== 'get') {\r\n            if (!options.idempotencyKey)\r\n                options.idempotencyKey = this.defaultIdempotencyKey();\r\n            headers[this.idempotencyHeader] = options.idempotencyKey;\r\n        }\r\n        const reqHeaders = {\r\n            ...(contentLength && { 'Content-Length': contentLength }),\r\n            ...this.defaultHeaders(options),\r\n            ...headers,\r\n        };\r\n        // let builtin fetch set the Content-Type for multipart bodies\r\n        if (isMultipartBody(options.body) && shimsKind !== 'node') {\r\n            delete reqHeaders['Content-Type'];\r\n        }\r\n        // Strip any headers being explicitly omitted with null\r\n        Object.keys(reqHeaders).forEach((key) => reqHeaders[key] === null && delete reqHeaders[key]);\r\n        const req = {\r\n            method,\r\n            ...(body && { body: body }),\r\n            headers: reqHeaders,\r\n            ...(httpAgent && { agent: httpAgent }),\r\n            // @ts-ignore node-fetch uses a custom AbortSignal type that is\r\n            // not compatible with standard web types\r\n            signal: options.signal ?? null,\r\n        };\r\n        this.validateHeaders(reqHeaders, headers);\r\n        return { req, url, timeout };\r\n    }\r\n    /**\r\n     * Used as a callback for mutating the given `RequestInit` object.\r\n     *\r\n     * This is useful for cases where you want to add certain headers based off of\r\n     * the request properties, e.g. `method` or `url`.\r\n     */\r\n    async prepareRequest(request, { url, options }) { }\r\n    parseHeaders(headers) {\r\n        return (!headers ? {}\r\n            : Symbol.iterator in headers ?\r\n                Object.fromEntries(Array.from(headers).map((header) => [...header]))\r\n                : { ...headers });\r\n    }\r\n    makeStatusError(status, error, message, headers) {\r\n        return APIError.generate(status, error, message, headers);\r\n    }\r\n    request(options, remainingRetries = null) {\r\n        return new APIPromise(this.makeRequest(options, remainingRetries));\r\n    }\r\n    async makeRequest(optionsInput, retriesRemaining) {\r\n        const options = await optionsInput;\r\n        if (retriesRemaining == null) {\r\n            retriesRemaining = options.maxRetries ?? this.maxRetries;\r\n        }\r\n        const { req, url, timeout } = this.buildRequest(options);\r\n        await this.prepareRequest(req, { url, options });\r\n        debug('request', url, options, req.headers);\r\n        if (options.signal?.aborted) {\r\n            throw new APIUserAbortError();\r\n        }\r\n        const controller = new AbortController();\r\n        const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);\r\n        if (response instanceof Error) {\r\n            if (options.signal?.aborted) {\r\n                throw new APIUserAbortError();\r\n            }\r\n            if (retriesRemaining) {\r\n                return this.retryRequest(options, retriesRemaining);\r\n            }\r\n            if (response.name === 'AbortError') {\r\n                throw new APIConnectionTimeoutError();\r\n            }\r\n            throw new APIConnectionError({ cause: response });\r\n        }\r\n        const responseHeaders = createResponseHeaders(response.headers);\r\n        if (!response.ok) {\r\n            if (retriesRemaining && this.shouldRetry(response)) {\r\n                return this.retryRequest(options, retriesRemaining, responseHeaders);\r\n            }\r\n            const errText = await response.text().catch((e) => castToError(e).message);\r\n            const errJSON = safeJSON(errText);\r\n            const errMessage = errJSON ? undefined : errText;\r\n            debug('response', response.status, url, responseHeaders, errMessage);\r\n            const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);\r\n            throw err;\r\n        }\r\n        return { response, options, controller };\r\n    }\r\n    requestAPIList(Page, options) {\r\n        const request = this.makeRequest(options, null);\r\n        return new PagePromise(this, request, Page);\r\n    }\r\n    buildURL(path, query) {\r\n        const url = isAbsoluteURL(path) ?\r\n            new URL(path)\r\n            : new URL(this.baseURL + (this.baseURL.endsWith('/') && path.startsWith('/') ? path.slice(1) : path));\r\n        const defaultQuery = this.defaultQuery();\r\n        if (!isEmptyObj(defaultQuery)) {\r\n            query = { ...defaultQuery, ...query };\r\n        }\r\n        if (query) {\r\n            url.search = this.stringifyQuery(query);\r\n        }\r\n        return url.toString();\r\n    }\r\n    stringifyQuery(query) {\r\n        return Object.entries(query)\r\n            .filter(([_, value]) => typeof value !== 'undefined')\r\n            .map(([key, value]) => {\r\n            if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\r\n                return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\r\n            }\r\n            if (value === null) {\r\n                return `${encodeURIComponent(key)}=`;\r\n            }\r\n            throw new OpenAIError(`Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`);\r\n        })\r\n            .join('&');\r\n    }\r\n    async fetchWithTimeout(url, init, ms, controller) {\r\n        const { signal, ...options } = init || {};\r\n        if (signal)\r\n            signal.addEventListener('abort', () => controller.abort());\r\n        const timeout = setTimeout(() => controller.abort(), ms);\r\n        return (this.getRequestClient()\r\n            // use undefined this binding; fetch errors if bound to something else in browser/cloudflare\r\n            .fetch.call(undefined, url, { signal: controller.signal, ...options })\r\n            .finally(() => {\r\n            clearTimeout(timeout);\r\n        }));\r\n    }\r\n    getRequestClient() {\r\n        return { fetch: this.fetch };\r\n    }\r\n    shouldRetry(response) {\r\n        // Note this is not a standard header.\r\n        const shouldRetryHeader = response.headers.get('x-should-retry');\r\n        // If the server explicitly says whether or not to retry, obey.\r\n        if (shouldRetryHeader === 'true')\r\n            return true;\r\n        if (shouldRetryHeader === 'false')\r\n            return false;\r\n        // Retry on request timeouts.\r\n        if (response.status === 408)\r\n            return true;\r\n        // Retry on lock timeouts.\r\n        if (response.status === 409)\r\n            return true;\r\n        // Retry on rate limits.\r\n        if (response.status === 429)\r\n            return true;\r\n        // Retry internal errors.\r\n        if (response.status >= 500)\r\n            return true;\r\n        return false;\r\n    }\r\n    async retryRequest(options, retriesRemaining, responseHeaders) {\r\n        // About the Retry-After header: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After\r\n        let timeoutMillis;\r\n        const retryAfterHeader = responseHeaders?.['retry-after'];\r\n        if (retryAfterHeader) {\r\n            const timeoutSeconds = parseInt(retryAfterHeader);\r\n            if (!Number.isNaN(timeoutSeconds)) {\r\n                timeoutMillis = timeoutSeconds * 1000;\r\n            }\r\n            else {\r\n                timeoutMillis = Date.parse(retryAfterHeader) - Date.now();\r\n            }\r\n        }\r\n        // If the API asks us to wait a certain amount of time (and it's a reasonable amount),\r\n        // just do what it says, but otherwise calculate a default\r\n        if (!timeoutMillis ||\r\n            !Number.isInteger(timeoutMillis) ||\r\n            timeoutMillis <= 0 ||\r\n            timeoutMillis > 60 * 1000) {\r\n            const maxRetries = options.maxRetries ?? this.maxRetries;\r\n            timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);\r\n        }\r\n        await sleep(timeoutMillis);\r\n        return this.makeRequest(options, retriesRemaining - 1);\r\n    }\r\n    calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries) {\r\n        const initialRetryDelay = 0.5;\r\n        const maxRetryDelay = 8.0;\r\n        const numRetries = maxRetries - retriesRemaining;\r\n        // Apply exponential backoff, but not more than the max.\r\n        const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);\r\n        // Apply some jitter, take up to at most 25 percent of the retry time.\r\n        const jitter = 1 - Math.random() * 0.25;\r\n        return sleepSeconds * jitter * 1000;\r\n    }\r\n    getUserAgent() {\r\n        return `${this.constructor.name}/JS ${VERSION}`;\r\n    }\r\n}\r\nexport class AbstractPage {\r\n    constructor(client, response, body, options) {\r\n        _AbstractPage_client.set(this, void 0);\r\n        __classPrivateFieldSet(this, _AbstractPage_client, client, \"f\");\r\n        this.options = options;\r\n        this.response = response;\r\n        this.body = body;\r\n    }\r\n    hasNextPage() {\r\n        const items = this.getPaginatedItems();\r\n        if (!items.length)\r\n            return false;\r\n        return this.nextPageInfo() != null;\r\n    }\r\n    async getNextPage() {\r\n        const nextInfo = this.nextPageInfo();\r\n        if (!nextInfo) {\r\n            throw new OpenAIError('No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.');\r\n        }\r\n        const nextOptions = { ...this.options };\r\n        if ('params' in nextInfo) {\r\n            nextOptions.query = { ...nextOptions.query, ...nextInfo.params };\r\n        }\r\n        else if ('url' in nextInfo) {\r\n            const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];\r\n            for (const [key, value] of params) {\r\n                nextInfo.url.searchParams.set(key, value);\r\n            }\r\n            nextOptions.query = undefined;\r\n            nextOptions.path = nextInfo.url.toString();\r\n        }\r\n        return await __classPrivateFieldGet(this, _AbstractPage_client, \"f\").requestAPIList(this.constructor, nextOptions);\r\n    }\r\n    async *iterPages() {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        let page = this;\r\n        yield page;\r\n        while (page.hasNextPage()) {\r\n            page = await page.getNextPage();\r\n            yield page;\r\n        }\r\n    }\r\n    async *[(_AbstractPage_client = new WeakMap(), Symbol.asyncIterator)]() {\r\n        for await (const page of this.iterPages()) {\r\n            for (const item of page.getPaginatedItems()) {\r\n                yield item;\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * This subclass of Promise will resolve to an instantiated Page once the request completes.\r\n *\r\n * It also implements AsyncIterable to allow auto-paginating iteration on an unawaited list call, eg:\r\n *\r\n *    for await (const item of client.items.list()) {\r\n *      console.log(item)\r\n *    }\r\n */\r\nexport class PagePromise extends APIPromise {\r\n    constructor(client, request, Page) {\r\n        super(request, async (props) => new Page(client, props.response, await defaultParseResponse(props), props.options));\r\n    }\r\n    /**\r\n     * Allow auto-paginating iteration on an unawaited list call, eg:\r\n     *\r\n     *    for await (const item of client.items.list()) {\r\n     *      console.log(item)\r\n     *    }\r\n     */\r\n    async *[Symbol.asyncIterator]() {\r\n        const page = await this;\r\n        for await (const item of page) {\r\n            yield item;\r\n        }\r\n    }\r\n}\r\nexport const createResponseHeaders = (headers) => {\r\n    return new Proxy(Object.fromEntries(\r\n    // @ts-ignore\r\n    headers.entries()), {\r\n        get(target, name) {\r\n            const key = name.toString();\r\n            return target[key.toLowerCase()] || target[key];\r\n        },\r\n    });\r\n};\r\n// This is required so that we can determine if a given object matches the RequestOptions\r\n// type at runtime. While this requires duplication, it is enforced by the TypeScript\r\n// compiler such that any missing / extraneous keys will cause an error.\r\nconst requestOptionsKeys = {\r\n    method: true,\r\n    path: true,\r\n    query: true,\r\n    body: true,\r\n    headers: true,\r\n    maxRetries: true,\r\n    stream: true,\r\n    timeout: true,\r\n    httpAgent: true,\r\n    signal: true,\r\n    idempotencyKey: true,\r\n    __binaryResponse: true,\r\n};\r\nexport const isRequestOptions = (obj) => {\r\n    return (typeof obj === 'object' &&\r\n        obj !== null &&\r\n        !isEmptyObj(obj) &&\r\n        Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k)));\r\n};\r\nconst getPlatformProperties = () => {\r\n    if (typeof Deno !== 'undefined' && Deno.build != null) {\r\n        return {\r\n            'X-Stainless-Lang': 'js',\r\n            'X-Stainless-Package-Version': VERSION,\r\n            'X-Stainless-OS': normalizePlatform(Deno.build.os),\r\n            'X-Stainless-Arch': normalizeArch(Deno.build.arch),\r\n            'X-Stainless-Runtime': 'deno',\r\n            'X-Stainless-Runtime-Version': Deno.version,\r\n        };\r\n    }\r\n    if (typeof EdgeRuntime !== 'undefined') {\r\n        return {\r\n            'X-Stainless-Lang': 'js',\r\n            'X-Stainless-Package-Version': VERSION,\r\n            'X-Stainless-OS': 'Unknown',\r\n            'X-Stainless-Arch': `other:${EdgeRuntime}`,\r\n            'X-Stainless-Runtime': 'edge',\r\n            'X-Stainless-Runtime-Version': process.version,\r\n        };\r\n    }\r\n    // Check if Node.js\r\n    if (Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]') {\r\n        return {\r\n            'X-Stainless-Lang': 'js',\r\n            'X-Stainless-Package-Version': VERSION,\r\n            'X-Stainless-OS': normalizePlatform(process.platform),\r\n            'X-Stainless-Arch': normalizeArch(process.arch),\r\n            'X-Stainless-Runtime': 'node',\r\n            'X-Stainless-Runtime-Version': process.version,\r\n        };\r\n    }\r\n    const browserInfo = getBrowserInfo();\r\n    if (browserInfo) {\r\n        return {\r\n            'X-Stainless-Lang': 'js',\r\n            'X-Stainless-Package-Version': VERSION,\r\n            'X-Stainless-OS': 'Unknown',\r\n            'X-Stainless-Arch': 'unknown',\r\n            'X-Stainless-Runtime': `browser:${browserInfo.browser}`,\r\n            'X-Stainless-Runtime-Version': browserInfo.version,\r\n        };\r\n    }\r\n    // TODO add support for Cloudflare workers, etc.\r\n    return {\r\n        'X-Stainless-Lang': 'js',\r\n        'X-Stainless-Package-Version': VERSION,\r\n        'X-Stainless-OS': 'Unknown',\r\n        'X-Stainless-Arch': 'unknown',\r\n        'X-Stainless-Runtime': 'unknown',\r\n        'X-Stainless-Runtime-Version': 'unknown',\r\n    };\r\n};\r\n// Note: modified from https://github.com/JS-DevTools/host-environment/blob/b1ab79ecde37db5d6e163c050e54fe7d287d7c92/src/isomorphic.browser.ts\r\nfunction getBrowserInfo() {\r\n    if (typeof navigator === 'undefined' || !navigator) {\r\n        return null;\r\n    }\r\n    // NOTE: The order matters here!\r\n    const browserPatterns = [\r\n        { key: 'edge', pattern: /Edge(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\r\n        { key: 'ie', pattern: /MSIE(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\r\n        { key: 'ie', pattern: /Trident(?:.*rv\\:(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\r\n        { key: 'chrome', pattern: /Chrome(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\r\n        { key: 'firefox', pattern: /Firefox(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\r\n        { key: 'safari', pattern: /(?:Version\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?(?:\\W+Mobile\\S*)?\\W+Safari/ },\r\n    ];\r\n    // Find the FIRST matching browser\r\n    for (const { key, pattern } of browserPatterns) {\r\n        const match = pattern.exec(navigator.userAgent);\r\n        if (match) {\r\n            const major = match[1] || 0;\r\n            const minor = match[2] || 0;\r\n            const patch = match[3] || 0;\r\n            return { browser: key, version: `${major}.${minor}.${patch}` };\r\n        }\r\n    }\r\n    return null;\r\n}\r\nconst normalizeArch = (arch) => {\r\n    // Node docs:\r\n    // - https://nodejs.org/api/process.html#processarch\r\n    // Deno docs:\r\n    // - https://doc.deno.land/deno/stable/~/Deno.build\r\n    if (arch === 'x32')\r\n        return 'x32';\r\n    if (arch === 'x86_64' || arch === 'x64')\r\n        return 'x64';\r\n    if (arch === 'arm')\r\n        return 'arm';\r\n    if (arch === 'aarch64' || arch === 'arm64')\r\n        return 'arm64';\r\n    if (arch)\r\n        return `other:${arch}`;\r\n    return 'unknown';\r\n};\r\nconst normalizePlatform = (platform) => {\r\n    // Node platforms:\r\n    // - https://nodejs.org/api/process.html#processplatform\r\n    // Deno platforms:\r\n    // - https://doc.deno.land/deno/stable/~/Deno.build\r\n    // - https://github.com/denoland/deno/issues/14799\r\n    platform = platform.toLowerCase();\r\n    // NOTE: this iOS check is untested and may not work\r\n    // Node does not work natively on IOS, there is a fork at\r\n    // https://github.com/nodejs-mobile/nodejs-mobile\r\n    // however it is unknown at the time of writing how to detect if it is running\r\n    if (platform.includes('ios'))\r\n        return 'iOS';\r\n    if (platform === 'android')\r\n        return 'Android';\r\n    if (platform === 'darwin')\r\n        return 'MacOS';\r\n    if (platform === 'win32')\r\n        return 'Windows';\r\n    if (platform === 'freebsd')\r\n        return 'FreeBSD';\r\n    if (platform === 'openbsd')\r\n        return 'OpenBSD';\r\n    if (platform === 'linux')\r\n        return 'Linux';\r\n    if (platform)\r\n        return `Other:${platform}`;\r\n    return 'Unknown';\r\n};\r\nlet _platformHeaders;\r\nconst getPlatformHeaders = () => {\r\n    return (_platformHeaders ?? (_platformHeaders = getPlatformProperties()));\r\n};\r\nexport const safeJSON = (text) => {\r\n    try {\r\n        return JSON.parse(text);\r\n    }\r\n    catch (err) {\r\n        return undefined;\r\n    }\r\n};\r\n// https://stackoverflow.com/a/19709846\r\nconst startsWithSchemeRegexp = new RegExp('^(?:[a-z]+:)?//', 'i');\r\nconst isAbsoluteURL = (url) => {\r\n    return startsWithSchemeRegexp.test(url);\r\n};\r\nexport const sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\r\nconst validatePositiveInteger = (name, n) => {\r\n    if (typeof n !== 'number' || !Number.isInteger(n)) {\r\n        throw new OpenAIError(`${name} must be an integer`);\r\n    }\r\n    if (n < 0) {\r\n        throw new OpenAIError(`${name} must be a positive integer`);\r\n    }\r\n    return n;\r\n};\r\nexport const castToError = (err) => {\r\n    if (err instanceof Error)\r\n        return err;\r\n    return new Error(err);\r\n};\r\nexport const ensurePresent = (value) => {\r\n    if (value == null)\r\n        throw new OpenAIError(`Expected a value to be given but received ${value} instead.`);\r\n    return value;\r\n};\r\n/**\r\n * Read an environment variable.\r\n *\r\n * Will return undefined if the environment variable doesn't exist or cannot be accessed.\r\n */\r\nexport const readEnv = (env) => {\r\n    if (typeof process !== 'undefined') {\r\n        return process.env?.[env] ?? undefined;\r\n    }\r\n    if (typeof Deno !== 'undefined') {\r\n        return Deno.env?.get?.(env);\r\n    }\r\n    return undefined;\r\n};\r\nexport const coerceInteger = (value) => {\r\n    if (typeof value === 'number')\r\n        return Math.round(value);\r\n    if (typeof value === 'string')\r\n        return parseInt(value, 10);\r\n    throw new OpenAIError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\r\n};\r\nexport const coerceFloat = (value) => {\r\n    if (typeof value === 'number')\r\n        return value;\r\n    if (typeof value === 'string')\r\n        return parseFloat(value);\r\n    throw new OpenAIError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\r\n};\r\nexport const coerceBoolean = (value) => {\r\n    if (typeof value === 'boolean')\r\n        return value;\r\n    if (typeof value === 'string')\r\n        return value === 'true';\r\n    return Boolean(value);\r\n};\r\nexport const maybeCoerceInteger = (value) => {\r\n    if (value === undefined) {\r\n        return undefined;\r\n    }\r\n    return coerceInteger(value);\r\n};\r\nexport const maybeCoerceFloat = (value) => {\r\n    if (value === undefined) {\r\n        return undefined;\r\n    }\r\n    return coerceFloat(value);\r\n};\r\nexport const maybeCoerceBoolean = (value) => {\r\n    if (value === undefined) {\r\n        return undefined;\r\n    }\r\n    return coerceBoolean(value);\r\n};\r\n// https://stackoverflow.com/a/34491287\r\nexport function isEmptyObj(obj) {\r\n    if (!obj)\r\n        return true;\r\n    for (const _k in obj)\r\n        return false;\r\n    return true;\r\n}\r\n// https://eslint.org/docs/latest/rules/no-prototype-builtins\r\nexport function hasOwn(obj, key) {\r\n    return Object.prototype.hasOwnProperty.call(obj, key);\r\n}\r\nexport function debug(action, ...args) {\r\n    if (typeof process !== 'undefined' && process.env['DEBUG'] === 'true') {\r\n        console.log(`OpenAI:DEBUG:${action}`, ...args);\r\n    }\r\n}\r\n/**\r\n * https://stackoverflow.com/a/2117523\r\n */\r\nconst uuid4 = () => {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\r\n        const r = (Math.random() * 16) | 0;\r\n        const v = c === 'x' ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n};\r\nexport const isRunningInBrowser = () => {\r\n    return (\r\n    // @ts-ignore\r\n    typeof window !== 'undefined' &&\r\n        // @ts-ignore\r\n        typeof window.document !== 'undefined' &&\r\n        // @ts-ignore\r\n        typeof navigator !== 'undefined');\r\n};\r\nexport const isHeadersProtocol = (headers) => {\r\n    return typeof headers?.get === 'function';\r\n};\r\nexport const getRequiredHeader = (headers, header) => {\r\n    const lowerCasedHeader = header.toLowerCase();\r\n    if (isHeadersProtocol(headers)) {\r\n        // to deal with the case where the header looks like Stainless-Event-Id\r\n        const intercapsHeader = header[0]?.toUpperCase() +\r\n            header.substring(1).replace(/([^\\w])(\\w)/g, (_m, g1, g2) => g1 + g2.toUpperCase());\r\n        for (const key of [header, lowerCasedHeader, header.toUpperCase(), intercapsHeader]) {\r\n            const value = headers.get(key);\r\n            if (value) {\r\n                return value;\r\n            }\r\n        }\r\n    }\r\n    for (const [key, value] of Object.entries(headers)) {\r\n        if (key.toLowerCase() === lowerCasedHeader) {\r\n            if (Array.isArray(value)) {\r\n                if (value.length <= 1)\r\n                    return value[0];\r\n                console.warn(`Received ${value.length} entries for the ${header} header, using the first entry.`);\r\n                return value[0];\r\n            }\r\n            return value;\r\n        }\r\n    }\r\n    throw new Error(`Could not find ${header} header`);\r\n};\r\n/**\r\n * Encodes a string to Base64 format.\r\n */\r\nexport const toBase64 = (str) => {\r\n    if (!str)\r\n        return '';\r\n    if (typeof Buffer !== 'undefined') {\r\n        return Buffer.from(str).toString('base64');\r\n    }\r\n    if (typeof btoa !== 'undefined') {\r\n        return btoa(str);\r\n    }\r\n    throw new OpenAIError('Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined');\r\n};\r\n//# sourceMappingURL=core.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { AbstractPage } from \"./core.mjs\";\r\n/**\r\n * Note: no pagination actually occurs yet, this is for forwards-compatibility.\r\n */\r\nexport class Page extends AbstractPage {\r\n    constructor(client, response, body, options) {\r\n        super(client, response, body, options);\r\n        this.data = body.data;\r\n        this.object = body.object;\r\n    }\r\n    getPaginatedItems() {\r\n        return this.data;\r\n    }\r\n    // @deprecated Please use `nextPageInfo()` instead\r\n    /**\r\n     * This page represents a response that isn't actually paginated at the API level\r\n     * so there will never be any next page params.\r\n     */\r\n    nextPageParams() {\r\n        return null;\r\n    }\r\n    nextPageInfo() {\r\n        return null;\r\n    }\r\n}\r\nexport class CursorPage extends AbstractPage {\r\n    constructor(client, response, body, options) {\r\n        super(client, response, body, options);\r\n        this.data = body.data;\r\n    }\r\n    getPaginatedItems() {\r\n        return this.data;\r\n    }\r\n    // @deprecated Please use `nextPageInfo()` instead\r\n    nextPageParams() {\r\n        const info = this.nextPageInfo();\r\n        if (!info)\r\n            return null;\r\n        if ('params' in info)\r\n            return info.params;\r\n        const params = Object.fromEntries(info.url.searchParams);\r\n        if (!Object.keys(params).length)\r\n            return null;\r\n        return params;\r\n    }\r\n    nextPageInfo() {\r\n        if (!this.data?.length) {\r\n            return null;\r\n        }\r\n        const next = this.data[this.data.length - 1]?.id;\r\n        if (!next)\r\n            return null;\r\n        return { params: { after: next } };\r\n    }\r\n}\r\n//# sourceMappingURL=pagination.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nexport class APIResource {\r\n    constructor(client) {\r\n        this._client = client;\r\n    }\r\n}\r\n//# sourceMappingURL=resource.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nexport class Completions extends APIResource {\r\n    create(body, options) {\r\n        return this._client.post('/completions', { body, ...options, stream: body.stream ?? false });\r\n    }\r\n}\r\n(function (Completions) {\r\n})(Completions || (Completions = {}));\r\n//# sourceMappingURL=completions.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nexport class Completions extends APIResource {\r\n    create(body, options) {\r\n        return this._client.post('/chat/completions', { body, ...options, stream: body.stream ?? false });\r\n    }\r\n}\r\n(function (Completions) {\r\n})(Completions || (Completions = {}));\r\n//# sourceMappingURL=completions.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport * as CompletionsAPI from 'openai/resources/chat/completions';\r\nexport class Chat extends APIResource {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.completions = new CompletionsAPI.Completions(this._client);\r\n    }\r\n}\r\n(function (Chat) {\r\n    Chat.Completions = CompletionsAPI.Completions;\r\n})(Chat || (Chat = {}));\r\n//# sourceMappingURL=chat.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nexport class Edits extends APIResource {\r\n    /**\r\n     * Creates a new edit for the provided input, instruction, and parameters.\r\n     *\r\n     * @deprecated The Edits API is deprecated; please use Chat Completions instead.\r\n     *\r\n     * https://openai.com/blog/gpt-4-api-general-availability#deprecation-of-the-edits-api\r\n     */\r\n    create(body, options) {\r\n        return this._client.post('/edits', { body, ...options });\r\n    }\r\n}\r\n(function (Edits) {\r\n})(Edits || (Edits = {}));\r\n//# sourceMappingURL=edits.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nexport class Embeddings extends APIResource {\r\n    /**\r\n     * Creates an embedding vector representing the input text.\r\n     */\r\n    create(body, options) {\r\n        return this._client.post('/embeddings', { body, ...options });\r\n    }\r\n}\r\n(function (Embeddings) {\r\n})(Embeddings || (Embeddings = {}));\r\n//# sourceMappingURL=embeddings.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { isRequestOptions } from 'openai/core';\r\nimport { sleep } from 'openai/core';\r\nimport { APIConnectionTimeoutError } from 'openai/error';\r\nimport * as FilesAPI from 'openai/resources/files';\r\nimport { multipartFormRequestOptions } from 'openai/core';\r\nimport { Page } from 'openai/pagination';\r\nexport class Files extends APIResource {\r\n    /**\r\n     * Upload a file that can be used across various endpoints/features. The size of\r\n     * all the files uploaded by one organization can be up to 100 GB.\r\n     *\r\n     * The size of individual files for can be a maximum of 512MB. See the\r\n     * [Assistants Tools guide](https://platform.openai.com/docs/assistants/tools) to\r\n     * learn more about the types of files supported. The Fine-tuning API only supports\r\n     * `.jsonl` files.\r\n     *\r\n     * Please [contact us](https://help.openai.com/) if you need to increase these\r\n     * storage limits.\r\n     */\r\n    create(body, options) {\r\n        return this._client.post('/files', multipartFormRequestOptions({ body, ...options }));\r\n    }\r\n    /**\r\n     * Returns information about a specific file.\r\n     */\r\n    retrieve(fileId, options) {\r\n        return this._client.get(`/files/${fileId}`, options);\r\n    }\r\n    list(query = {}, options) {\r\n        if (isRequestOptions(query)) {\r\n            return this.list({}, query);\r\n        }\r\n        return this._client.getAPIList('/files', FileObjectsPage, { query, ...options });\r\n    }\r\n    /**\r\n     * Delete a file.\r\n     */\r\n    del(fileId, options) {\r\n        return this._client.delete(`/files/${fileId}`, options);\r\n    }\r\n    /**\r\n     * Returns the contents of the specified file.\r\n     */\r\n    content(fileId, options) {\r\n        return this._client.get(`/files/${fileId}/content`, { ...options, __binaryResponse: true });\r\n    }\r\n    /**\r\n     * Returns the contents of the specified file.\r\n     *\r\n     * @deprecated The `.content()` method should be used instead\r\n     */\r\n    retrieveContent(fileId, options) {\r\n        return this._client.get(`/files/${fileId}/content`, {\r\n            ...options,\r\n            headers: { Accept: 'application/json', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Waits for the given file to be processed, default timeout is 30 mins.\r\n     */\r\n    async waitForProcessing(id, { pollInterval = 5000, maxWait = 30 * 60 * 1000 } = {}) {\r\n        const TERMINAL_STATES = new Set(['processed', 'error', 'deleted']);\r\n        const start = Date.now();\r\n        let file = await this.retrieve(id);\r\n        while (!file.status || !TERMINAL_STATES.has(file.status)) {\r\n            await sleep(pollInterval);\r\n            file = await this.retrieve(id);\r\n            if (Date.now() - start > maxWait) {\r\n                throw new APIConnectionTimeoutError({\r\n                    message: `Giving up on waiting for file ${id} to finish processing after ${maxWait} milliseconds.`,\r\n                });\r\n            }\r\n        }\r\n        return file;\r\n    }\r\n}\r\n/**\r\n * Note: no pagination actually occurs yet, this is for forwards-compatibility.\r\n */\r\nexport class FileObjectsPage extends Page {\r\n}\r\n(function (Files) {\r\n    Files.FileObjectsPage = FilesAPI.FileObjectsPage;\r\n})(Files || (Files = {}));\r\n//# sourceMappingURL=files.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { multipartFormRequestOptions } from 'openai/core';\r\nexport class Images extends APIResource {\r\n    /**\r\n     * Creates a variation of a given image.\r\n     */\r\n    createVariation(body, options) {\r\n        return this._client.post('/images/variations', multipartFormRequestOptions({ body, ...options }));\r\n    }\r\n    /**\r\n     * Creates an edited or extended image given an original image and a prompt.\r\n     */\r\n    edit(body, options) {\r\n        return this._client.post('/images/edits', multipartFormRequestOptions({ body, ...options }));\r\n    }\r\n    /**\r\n     * Creates an image given a prompt.\r\n     */\r\n    generate(body, options) {\r\n        return this._client.post('/images/generations', { body, ...options });\r\n    }\r\n}\r\n(function (Images) {\r\n})(Images || (Images = {}));\r\n//# sourceMappingURL=images.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nexport class Speech extends APIResource {\r\n    /**\r\n     * Generates audio from the input text.\r\n     */\r\n    create(body, options) {\r\n        return this._client.post('/audio/speech', { body, ...options, __binaryResponse: true });\r\n    }\r\n}\r\n(function (Speech) {\r\n})(Speech || (Speech = {}));\r\n//# sourceMappingURL=speech.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { multipartFormRequestOptions } from 'openai/core';\r\nexport class Transcriptions extends APIResource {\r\n    /**\r\n     * Transcribes audio into the input language.\r\n     */\r\n    create(body, options) {\r\n        return this._client.post('/audio/transcriptions', multipartFormRequestOptions({ body, ...options }));\r\n    }\r\n}\r\n(function (Transcriptions) {\r\n})(Transcriptions || (Transcriptions = {}));\r\n//# sourceMappingURL=transcriptions.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { multipartFormRequestOptions } from 'openai/core';\r\nexport class Translations extends APIResource {\r\n    /**\r\n     * Translates audio into English.\r\n     */\r\n    create(body, options) {\r\n        return this._client.post('/audio/translations', multipartFormRequestOptions({ body, ...options }));\r\n    }\r\n}\r\n(function (Translations) {\r\n})(Translations || (Translations = {}));\r\n//# sourceMappingURL=translations.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport * as SpeechAPI from 'openai/resources/audio/speech';\r\nimport * as TranscriptionsAPI from 'openai/resources/audio/transcriptions';\r\nimport * as TranslationsAPI from 'openai/resources/audio/translations';\r\nexport class Audio extends APIResource {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.transcriptions = new TranscriptionsAPI.Transcriptions(this._client);\r\n        this.translations = new TranslationsAPI.Translations(this._client);\r\n        this.speech = new SpeechAPI.Speech(this._client);\r\n    }\r\n}\r\n(function (Audio) {\r\n    Audio.Transcriptions = TranscriptionsAPI.Transcriptions;\r\n    Audio.Translations = TranslationsAPI.Translations;\r\n    Audio.Speech = SpeechAPI.Speech;\r\n})(Audio || (Audio = {}));\r\n//# sourceMappingURL=audio.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nexport class Moderations extends APIResource {\r\n    /**\r\n     * Classifies if text violates OpenAI's Content Policy\r\n     */\r\n    create(body, options) {\r\n        return this._client.post('/moderations', { body, ...options });\r\n    }\r\n}\r\n(function (Moderations) {\r\n})(Moderations || (Moderations = {}));\r\n//# sourceMappingURL=moderations.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport * as ModelsAPI from 'openai/resources/models';\r\nimport { Page } from 'openai/pagination';\r\nexport class Models extends APIResource {\r\n    /**\r\n     * Retrieves a model instance, providing basic information about the model such as\r\n     * the owner and permissioning.\r\n     */\r\n    retrieve(model, options) {\r\n        return this._client.get(`/models/${model}`, options);\r\n    }\r\n    /**\r\n     * Lists the currently available models, and provides basic information about each\r\n     * one such as the owner and availability.\r\n     */\r\n    list(options) {\r\n        return this._client.getAPIList('/models', ModelsPage, options);\r\n    }\r\n    /**\r\n     * Delete a fine-tuned model. You must have the Owner role in your organization to\r\n     * delete a model.\r\n     */\r\n    del(model, options) {\r\n        return this._client.delete(`/models/${model}`, options);\r\n    }\r\n}\r\n/**\r\n * Note: no pagination actually occurs yet, this is for forwards-compatibility.\r\n */\r\nexport class ModelsPage extends Page {\r\n}\r\n(function (Models) {\r\n    Models.ModelsPage = ModelsAPI.ModelsPage;\r\n})(Models || (Models = {}));\r\n//# sourceMappingURL=models.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { isRequestOptions } from 'openai/core';\r\nimport * as JobsAPI from 'openai/resources/fine-tuning/jobs';\r\nimport { CursorPage } from 'openai/pagination';\r\nexport class Jobs extends APIResource {\r\n    /**\r\n     * Creates a job that fine-tunes a specified model from a given dataset.\r\n     *\r\n     * Response includes details of the enqueued job including job status and the name\r\n     * of the fine-tuned models once complete.\r\n     *\r\n     * [Learn more about fine-tuning](https://platform.openai.com/docs/guides/fine-tuning)\r\n     */\r\n    create(body, options) {\r\n        return this._client.post('/fine_tuning/jobs', { body, ...options });\r\n    }\r\n    /**\r\n     * Get info about a fine-tuning job.\r\n     *\r\n     * [Learn more about fine-tuning](https://platform.openai.com/docs/guides/fine-tuning)\r\n     */\r\n    retrieve(fineTuningJobId, options) {\r\n        return this._client.get(`/fine_tuning/jobs/${fineTuningJobId}`, options);\r\n    }\r\n    list(query = {}, options) {\r\n        if (isRequestOptions(query)) {\r\n            return this.list({}, query);\r\n        }\r\n        return this._client.getAPIList('/fine_tuning/jobs', FineTuningJobsPage, { query, ...options });\r\n    }\r\n    /**\r\n     * Immediately cancel a fine-tune job.\r\n     */\r\n    cancel(fineTuningJobId, options) {\r\n        return this._client.post(`/fine_tuning/jobs/${fineTuningJobId}/cancel`, options);\r\n    }\r\n    listEvents(fineTuningJobId, query = {}, options) {\r\n        if (isRequestOptions(query)) {\r\n            return this.listEvents(fineTuningJobId, {}, query);\r\n        }\r\n        return this._client.getAPIList(`/fine_tuning/jobs/${fineTuningJobId}/events`, FineTuningJobEventsPage, {\r\n            query,\r\n            ...options,\r\n        });\r\n    }\r\n}\r\nexport class FineTuningJobsPage extends CursorPage {\r\n}\r\nexport class FineTuningJobEventsPage extends CursorPage {\r\n}\r\n(function (Jobs) {\r\n    Jobs.FineTuningJobsPage = JobsAPI.FineTuningJobsPage;\r\n    Jobs.FineTuningJobEventsPage = JobsAPI.FineTuningJobEventsPage;\r\n})(Jobs || (Jobs = {}));\r\n//# sourceMappingURL=jobs.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport * as JobsAPI from 'openai/resources/fine-tuning/jobs';\r\nexport class FineTuning extends APIResource {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.jobs = new JobsAPI.Jobs(this._client);\r\n    }\r\n}\r\n(function (FineTuning) {\r\n    FineTuning.Jobs = JobsAPI.Jobs;\r\n    FineTuning.FineTuningJobsPage = JobsAPI.FineTuningJobsPage;\r\n    FineTuning.FineTuningJobEventsPage = JobsAPI.FineTuningJobEventsPage;\r\n})(FineTuning || (FineTuning = {}));\r\n//# sourceMappingURL=fine-tuning.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport * as FineTunesAPI from 'openai/resources/fine-tunes';\r\nimport { Page } from 'openai/pagination';\r\nexport class FineTunes extends APIResource {\r\n    /**\r\n     * Creates a job that fine-tunes a specified model from a given dataset.\r\n     *\r\n     * Response includes details of the enqueued job including job status and the name\r\n     * of the fine-tuned models once complete.\r\n     *\r\n     * [Learn more about fine-tuning](https://platform.openai.com/docs/guides/legacy-fine-tuning)\r\n     */\r\n    create(body, options) {\r\n        return this._client.post('/fine-tunes', { body, ...options });\r\n    }\r\n    /**\r\n     * Gets info about the fine-tune job.\r\n     *\r\n     * [Learn more about fine-tuning](https://platform.openai.com/docs/guides/legacy-fine-tuning)\r\n     */\r\n    retrieve(fineTuneId, options) {\r\n        return this._client.get(`/fine-tunes/${fineTuneId}`, options);\r\n    }\r\n    /**\r\n     * List your organization's fine-tuning jobs\r\n     */\r\n    list(options) {\r\n        return this._client.getAPIList('/fine-tunes', FineTunesPage, options);\r\n    }\r\n    /**\r\n     * Immediately cancel a fine-tune job.\r\n     */\r\n    cancel(fineTuneId, options) {\r\n        return this._client.post(`/fine-tunes/${fineTuneId}/cancel`, options);\r\n    }\r\n    listEvents(fineTuneId, query, options) {\r\n        return this._client.get(`/fine-tunes/${fineTuneId}/events`, {\r\n            query,\r\n            timeout: 86400000,\r\n            ...options,\r\n            stream: query?.stream ?? false,\r\n        });\r\n    }\r\n}\r\n/**\r\n * Note: no pagination actually occurs yet, this is for forwards-compatibility.\r\n */\r\nexport class FineTunesPage extends Page {\r\n}\r\n(function (FineTunes) {\r\n    FineTunes.FineTunesPage = FineTunesAPI.FineTunesPage;\r\n})(FineTunes || (FineTunes = {}));\r\n//# sourceMappingURL=fine-tunes.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { isRequestOptions } from 'openai/core';\r\nimport * as FilesAPI from 'openai/resources/beta/assistants/files';\r\nimport { CursorPage } from 'openai/pagination';\r\nexport class Files extends APIResource {\r\n    /**\r\n     * Create an assistant file by attaching a\r\n     * [File](https://platform.openai.com/docs/api-reference/files) to an\r\n     * [assistant](https://platform.openai.com/docs/api-reference/assistants).\r\n     */\r\n    create(assistantId, body, options) {\r\n        return this._client.post(`/assistants/${assistantId}/files`, {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Retrieves an AssistantFile.\r\n     */\r\n    retrieve(assistantId, fileId, options) {\r\n        return this._client.get(`/assistants/${assistantId}/files/${fileId}`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    list(assistantId, query = {}, options) {\r\n        if (isRequestOptions(query)) {\r\n            return this.list(assistantId, {}, query);\r\n        }\r\n        return this._client.getAPIList(`/assistants/${assistantId}/files`, AssistantFilesPage, {\r\n            query,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Delete an assistant file.\r\n     */\r\n    del(assistantId, fileId, options) {\r\n        return this._client.delete(`/assistants/${assistantId}/files/${fileId}`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n}\r\nexport class AssistantFilesPage extends CursorPage {\r\n}\r\n(function (Files) {\r\n    Files.AssistantFilesPage = FilesAPI.AssistantFilesPage;\r\n})(Files || (Files = {}));\r\n//# sourceMappingURL=files.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { isRequestOptions } from 'openai/core';\r\nimport * as AssistantsAPI from 'openai/resources/beta/assistants/assistants';\r\nimport * as FilesAPI from 'openai/resources/beta/assistants/files';\r\nimport { CursorPage } from 'openai/pagination';\r\nexport class Assistants extends APIResource {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.files = new FilesAPI.Files(this._client);\r\n    }\r\n    /**\r\n     * Create an assistant with a model and instructions.\r\n     */\r\n    create(body, options) {\r\n        return this._client.post('/assistants', {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Retrieves an assistant.\r\n     */\r\n    retrieve(assistantId, options) {\r\n        return this._client.get(`/assistants/${assistantId}`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Modifies an assistant.\r\n     */\r\n    update(assistantId, body, options) {\r\n        return this._client.post(`/assistants/${assistantId}`, {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    list(query = {}, options) {\r\n        if (isRequestOptions(query)) {\r\n            return this.list({}, query);\r\n        }\r\n        return this._client.getAPIList('/assistants', AssistantsPage, {\r\n            query,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Delete an assistant.\r\n     */\r\n    del(assistantId, options) {\r\n        return this._client.delete(`/assistants/${assistantId}`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n}\r\nexport class AssistantsPage extends CursorPage {\r\n}\r\n(function (Assistants) {\r\n    Assistants.AssistantsPage = AssistantsAPI.AssistantsPage;\r\n    Assistants.Files = FilesAPI.Files;\r\n    Assistants.AssistantFilesPage = FilesAPI.AssistantFilesPage;\r\n})(Assistants || (Assistants = {}));\r\n//# sourceMappingURL=assistants.mjs.map","export function isRunnableFunctionWithParse(fn) {\r\n    return typeof fn.parse === 'function';\r\n}\r\n/**\r\n * This is helper class for passing a `function` and `parse` where the `function`\r\n * argument type matches the `parse` return type.\r\n */\r\nexport class ParsingFunction {\r\n    constructor(input) {\r\n        this.function = input.function;\r\n        this.parse = input.parse;\r\n        this.parameters = input.parameters;\r\n        this.description = input.description;\r\n        this.name = input.name;\r\n    }\r\n}\r\n//# sourceMappingURL=RunnableFunction.mjs.map","export const isAssistantMessage = (message) => {\r\n    return message?.role === 'assistant';\r\n};\r\nexport const isFunctionMessage = (message) => {\r\n    return message?.role === 'function';\r\n};\r\nexport const isToolMessage = (message) => {\r\n    return message?.role === 'tool';\r\n};\r\nexport function isPresent(obj) {\r\n    return obj != null;\r\n}\r\n//# sourceMappingURL=chatCompletionUtils.mjs.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _AbstractChatCompletionRunner_instances, _AbstractChatCompletionRunner_connectedPromise, _AbstractChatCompletionRunner_resolveConnectedPromise, _AbstractChatCompletionRunner_rejectConnectedPromise, _AbstractChatCompletionRunner_endPromise, _AbstractChatCompletionRunner_resolveEndPromise, _AbstractChatCompletionRunner_rejectEndPromise, _AbstractChatCompletionRunner_listeners, _AbstractChatCompletionRunner_ended, _AbstractChatCompletionRunner_errored, _AbstractChatCompletionRunner_aborted, _AbstractChatCompletionRunner_catchingPromiseCreated, _AbstractChatCompletionRunner_getFinalContent, _AbstractChatCompletionRunner_getFinalMessage, _AbstractChatCompletionRunner_getFinalFunctionCall, _AbstractChatCompletionRunner_getFinalFunctionCallResult, _AbstractChatCompletionRunner_calculateTotalUsage, _AbstractChatCompletionRunner_handleError, _AbstractChatCompletionRunner_validateParams, _AbstractChatCompletionRunner_stringifyFunctionCallResult;\r\nimport { APIUserAbortError, OpenAIError } from 'openai/error';\r\nimport { isRunnableFunctionWithParse, } from \"./RunnableFunction.mjs\";\r\nimport { isAssistantMessage, isFunctionMessage, isToolMessage } from \"./chatCompletionUtils.mjs\";\r\nconst DEFAULT_MAX_CHAT_COMPLETIONS = 10;\r\nexport class AbstractChatCompletionRunner {\r\n    constructor() {\r\n        _AbstractChatCompletionRunner_instances.add(this);\r\n        this.controller = new AbortController();\r\n        _AbstractChatCompletionRunner_connectedPromise.set(this, void 0);\r\n        _AbstractChatCompletionRunner_resolveConnectedPromise.set(this, () => { });\r\n        _AbstractChatCompletionRunner_rejectConnectedPromise.set(this, () => { });\r\n        _AbstractChatCompletionRunner_endPromise.set(this, void 0);\r\n        _AbstractChatCompletionRunner_resolveEndPromise.set(this, () => { });\r\n        _AbstractChatCompletionRunner_rejectEndPromise.set(this, () => { });\r\n        _AbstractChatCompletionRunner_listeners.set(this, {});\r\n        this._chatCompletions = [];\r\n        this.messages = [];\r\n        _AbstractChatCompletionRunner_ended.set(this, false);\r\n        _AbstractChatCompletionRunner_errored.set(this, false);\r\n        _AbstractChatCompletionRunner_aborted.set(this, false);\r\n        _AbstractChatCompletionRunner_catchingPromiseCreated.set(this, false);\r\n        _AbstractChatCompletionRunner_handleError.set(this, (error) => {\r\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_errored, true, \"f\");\r\n            if (error instanceof Error && error.name === 'AbortError') {\r\n                error = new APIUserAbortError();\r\n            }\r\n            if (error instanceof APIUserAbortError) {\r\n                __classPrivateFieldSet(this, _AbstractChatCompletionRunner_aborted, true, \"f\");\r\n                return this._emit('abort', error);\r\n            }\r\n            if (error instanceof OpenAIError) {\r\n                return this._emit('error', error);\r\n            }\r\n            if (error instanceof Error) {\r\n                const openAIError = new OpenAIError(error.message);\r\n                // @ts-ignore\r\n                openAIError.cause = error;\r\n                return this._emit('error', openAIError);\r\n            }\r\n            return this._emit('error', new OpenAIError(String(error)));\r\n        });\r\n        __classPrivateFieldSet(this, _AbstractChatCompletionRunner_connectedPromise, new Promise((resolve, reject) => {\r\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_resolveConnectedPromise, resolve, \"f\");\r\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_rejectConnectedPromise, reject, \"f\");\r\n        }), \"f\");\r\n        __classPrivateFieldSet(this, _AbstractChatCompletionRunner_endPromise, new Promise((resolve, reject) => {\r\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_resolveEndPromise, resolve, \"f\");\r\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_rejectEndPromise, reject, \"f\");\r\n        }), \"f\");\r\n        // Don't let these promises cause unhandled rejection errors.\r\n        // we will manually cause an unhandled rejection error later\r\n        // if the user hasn't registered any error listener or called\r\n        // any promise-returning method.\r\n        __classPrivateFieldGet(this, _AbstractChatCompletionRunner_connectedPromise, \"f\").catch(() => { });\r\n        __classPrivateFieldGet(this, _AbstractChatCompletionRunner_endPromise, \"f\").catch(() => { });\r\n    }\r\n    _run(executor) {\r\n        // Unfortunately if we call `executor()` immediately we get runtime errors about\r\n        // references to `this` before the `super()` constructor call returns.\r\n        setTimeout(() => {\r\n            executor().then(() => {\r\n                this._emitFinal();\r\n                this._emit('end');\r\n            }, __classPrivateFieldGet(this, _AbstractChatCompletionRunner_handleError, \"f\"));\r\n        }, 0);\r\n    }\r\n    _addChatCompletion(chatCompletion) {\r\n        this._chatCompletions.push(chatCompletion);\r\n        this._emit('chatCompletion', chatCompletion);\r\n        const message = chatCompletion.choices[0]?.message;\r\n        if (message)\r\n            this._addMessage(message);\r\n        return chatCompletion;\r\n    }\r\n    _addMessage(message, emit = true) {\r\n        this.messages.push(message);\r\n        if (emit) {\r\n            this._emit('message', message);\r\n            if ((isFunctionMessage(message) || isToolMessage(message)) && message.content) {\r\n                // Note, this assumes that {role: 'tool', content: …} is always the result of a call of tool of type=function.\r\n                this._emit('functionCallResult', message.content);\r\n            }\r\n            else if (isAssistantMessage(message) && message.function_call) {\r\n                this._emit('functionCall', message.function_call);\r\n            }\r\n            else if (isAssistantMessage(message) && message.tool_calls) {\r\n                for (const tool_call of message.tool_calls) {\r\n                    if (tool_call.type === 'function') {\r\n                        this._emit('functionCall', tool_call.function);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _connected() {\r\n        if (this.ended)\r\n            return;\r\n        __classPrivateFieldGet(this, _AbstractChatCompletionRunner_resolveConnectedPromise, \"f\").call(this);\r\n        this._emit('connect');\r\n    }\r\n    get ended() {\r\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_ended, \"f\");\r\n    }\r\n    get errored() {\r\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_errored, \"f\");\r\n    }\r\n    get aborted() {\r\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_aborted, \"f\");\r\n    }\r\n    abort() {\r\n        this.controller.abort();\r\n    }\r\n    /**\r\n     * Adds the listener function to the end of the listeners array for the event.\r\n     * No checks are made to see if the listener has already been added. Multiple calls passing\r\n     * the same combination of event and listener will result in the listener being added, and\r\n     * called, multiple times.\r\n     * @returns this ChatCompletionStream, so that calls can be chained\r\n     */\r\n    on(event, listener) {\r\n        const listeners = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event] || (__classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event] = []);\r\n        listeners.push({ listener });\r\n        return this;\r\n    }\r\n    /**\r\n     * Removes the specified listener from the listener array for the event.\r\n     * off() will remove, at most, one instance of a listener from the listener array. If any single\r\n     * listener has been added multiple times to the listener array for the specified event, then\r\n     * off() must be called multiple times to remove each instance.\r\n     * @returns this ChatCompletionStream, so that calls can be chained\r\n     */\r\n    off(event, listener) {\r\n        const listeners = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event];\r\n        if (!listeners)\r\n            return this;\r\n        const index = listeners.findIndex((l) => l.listener === listener);\r\n        if (index >= 0)\r\n            listeners.splice(index, 1);\r\n        return this;\r\n    }\r\n    /**\r\n     * Adds a one-time listener function for the event. The next time the event is triggered,\r\n     * this listener is removed and then invoked.\r\n     * @returns this ChatCompletionStream, so that calls can be chained\r\n     */\r\n    once(event, listener) {\r\n        const listeners = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event] || (__classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event] = []);\r\n        listeners.push({ listener, once: true });\r\n        return this;\r\n    }\r\n    /**\r\n     * This is similar to `.once()`, but returns a Promise that resolves the next time\r\n     * the event is triggered, instead of calling a listener callback.\r\n     * @returns a Promise that resolves the next time given event is triggered,\r\n     * or rejects if an error is emitted.  (If you request the 'error' event,\r\n     * returns a promise that resolves with the error).\r\n     *\r\n     * Example:\r\n     *\r\n     *   const message = await stream.emitted('message') // rejects if the stream errors\r\n     */\r\n    emitted(event) {\r\n        return new Promise((resolve, reject) => {\r\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_catchingPromiseCreated, true, \"f\");\r\n            if (event !== 'error')\r\n                this.once('error', reject);\r\n            this.once(event, resolve);\r\n        });\r\n    }\r\n    async done() {\r\n        __classPrivateFieldSet(this, _AbstractChatCompletionRunner_catchingPromiseCreated, true, \"f\");\r\n        await __classPrivateFieldGet(this, _AbstractChatCompletionRunner_endPromise, \"f\");\r\n    }\r\n    /**\r\n     * @returns a promise that resolves with the final ChatCompletion, or rejects\r\n     * if an error occurred or the stream ended prematurely without producing a ChatCompletion.\r\n     */\r\n    async finalChatCompletion() {\r\n        await this.done();\r\n        const completion = this._chatCompletions[this._chatCompletions.length - 1];\r\n        if (!completion)\r\n            throw new OpenAIError('stream ended without producing a ChatCompletion');\r\n        return completion;\r\n    }\r\n    /**\r\n     * @returns a promise that resolves with the content of the final ChatCompletionMessage, or rejects\r\n     * if an error occurred or the stream ended prematurely without producing a ChatCompletionMessage.\r\n     */\r\n    async finalContent() {\r\n        await this.done();\r\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalContent).call(this);\r\n    }\r\n    /**\r\n     * @returns a promise that resolves with the the final assistant ChatCompletionMessage response,\r\n     * or rejects if an error occurred or the stream ended prematurely without producing a ChatCompletionMessage.\r\n     */\r\n    async finalMessage() {\r\n        await this.done();\r\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalMessage).call(this);\r\n    }\r\n    /**\r\n     * @returns a promise that resolves with the content of the final FunctionCall, or rejects\r\n     * if an error occurred or the stream ended prematurely without producing a ChatCompletionMessage.\r\n     */\r\n    async finalFunctionCall() {\r\n        await this.done();\r\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalFunctionCall).call(this);\r\n    }\r\n    async finalFunctionCallResult() {\r\n        await this.done();\r\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this);\r\n    }\r\n    async totalUsage() {\r\n        await this.done();\r\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_calculateTotalUsage).call(this);\r\n    }\r\n    allChatCompletions() {\r\n        return [...this._chatCompletions];\r\n    }\r\n    _emit(event, ...args) {\r\n        // make sure we don't emit any events after end\r\n        if (__classPrivateFieldGet(this, _AbstractChatCompletionRunner_ended, \"f\"))\r\n            return;\r\n        if (event === 'end') {\r\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_ended, true, \"f\");\r\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_resolveEndPromise, \"f\").call(this);\r\n        }\r\n        const listeners = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event];\r\n        if (listeners) {\r\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event] = listeners.filter((l) => !l.once);\r\n            listeners.forEach(({ listener }) => listener(...args));\r\n        }\r\n        if (event === 'abort') {\r\n            const error = args[0];\r\n            if (!__classPrivateFieldGet(this, _AbstractChatCompletionRunner_catchingPromiseCreated, \"f\") && !listeners?.length) {\r\n                Promise.reject(error);\r\n            }\r\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_rejectConnectedPromise, \"f\").call(this, error);\r\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_rejectEndPromise, \"f\").call(this, error);\r\n            this._emit('end');\r\n            return;\r\n        }\r\n        if (event === 'error') {\r\n            // NOTE: _emit('error', error) should only be called from #handleError().\r\n            const error = args[0];\r\n            if (!__classPrivateFieldGet(this, _AbstractChatCompletionRunner_catchingPromiseCreated, \"f\") && !listeners?.length) {\r\n                // Trigger an unhandled rejection if the user hasn't registered any error handlers.\r\n                // If you are seeing stack traces here, make sure to handle errors via either:\r\n                // - runner.on('error', () => ...)\r\n                // - await runner.done()\r\n                // - await runner.finalChatCompletion()\r\n                // - etc.\r\n                Promise.reject(error);\r\n            }\r\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_rejectConnectedPromise, \"f\").call(this, error);\r\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_rejectEndPromise, \"f\").call(this, error);\r\n            this._emit('end');\r\n        }\r\n    }\r\n    _emitFinal() {\r\n        const completion = this._chatCompletions[this._chatCompletions.length - 1];\r\n        if (completion)\r\n            this._emit('finalChatCompletion', completion);\r\n        const finalMessage = this.messages[this.messages.length - 1];\r\n        if (finalMessage)\r\n            this._emit('finalMessage', finalMessage);\r\n        const finalContent = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalContent).call(this);\r\n        if (finalContent)\r\n            this._emit('finalContent', finalContent);\r\n        const finalFunctionCall = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalFunctionCall).call(this);\r\n        if (finalFunctionCall)\r\n            this._emit('finalFunctionCall', finalFunctionCall);\r\n        const finalFunctionCallResult = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this);\r\n        if (finalFunctionCallResult != null)\r\n            this._emit('finalFunctionCallResult', finalFunctionCallResult);\r\n        if (this._chatCompletions.some((c) => c.usage)) {\r\n            this._emit('totalUsage', __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_calculateTotalUsage).call(this));\r\n        }\r\n    }\r\n    async _createChatCompletion(completions, params, options) {\r\n        const signal = options?.signal;\r\n        if (signal) {\r\n            if (signal.aborted)\r\n                this.controller.abort();\r\n            signal.addEventListener('abort', () => this.controller.abort());\r\n        }\r\n        __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_validateParams).call(this, params);\r\n        const chatCompletion = await completions.create({ ...params, stream: false }, { ...options, signal: this.controller.signal });\r\n        this._connected();\r\n        return this._addChatCompletion(chatCompletion);\r\n    }\r\n    async _runChatCompletion(completions, params, options) {\r\n        for (const message of params.messages) {\r\n            this._addMessage(message, false);\r\n        }\r\n        return await this._createChatCompletion(completions, params, options);\r\n    }\r\n    async _runFunctions(completions, params, options) {\r\n        const role = 'function';\r\n        const { function_call = 'auto', stream, ...restParams } = params;\r\n        const singleFunctionToCall = typeof function_call !== 'string' && function_call?.name;\r\n        const { maxChatCompletions = DEFAULT_MAX_CHAT_COMPLETIONS } = options || {};\r\n        const functionsByName = {};\r\n        for (const f of params.functions) {\r\n            functionsByName[f.name || f.function.name] = f;\r\n        }\r\n        const functions = params.functions.map((f) => ({\r\n            name: f.name || f.function.name,\r\n            parameters: f.parameters,\r\n            description: f.description,\r\n        }));\r\n        for (const message of params.messages) {\r\n            this._addMessage(message, false);\r\n        }\r\n        for (let i = 0; i < maxChatCompletions; ++i) {\r\n            const chatCompletion = await this._createChatCompletion(completions, {\r\n                ...restParams,\r\n                function_call,\r\n                functions,\r\n                messages: [...this.messages],\r\n            }, options);\r\n            const message = chatCompletion.choices[0]?.message;\r\n            if (!message) {\r\n                throw new OpenAIError(`missing message in ChatCompletion response`);\r\n            }\r\n            if (!message.function_call)\r\n                return;\r\n            const { name, arguments: args } = message.function_call;\r\n            const fn = functionsByName[name];\r\n            if (!fn) {\r\n                const content = `Invalid function_call: ${JSON.stringify(name)}. Available options are: ${functions\r\n                    .map((f) => JSON.stringify(f.name))\r\n                    .join(', ')}. Please try again`;\r\n                this._addMessage({ role, name, content });\r\n                continue;\r\n            }\r\n            else if (singleFunctionToCall && singleFunctionToCall !== name) {\r\n                const content = `Invalid function_call: ${JSON.stringify(name)}. ${JSON.stringify(singleFunctionToCall)} requested. Please try again`;\r\n                this._addMessage({ role, name, content });\r\n                continue;\r\n            }\r\n            let parsed;\r\n            try {\r\n                parsed = isRunnableFunctionWithParse(fn) ? await fn.parse(args) : args;\r\n            }\r\n            catch (error) {\r\n                this._addMessage({\r\n                    role,\r\n                    name,\r\n                    content: error instanceof Error ? error.message : String(error),\r\n                });\r\n                continue;\r\n            }\r\n            // @ts-expect-error it can't rule out `never` type.\r\n            const rawContent = await fn.function(parsed, this);\r\n            const content = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this, rawContent);\r\n            this._addMessage({ role, name, content });\r\n            if (singleFunctionToCall)\r\n                return;\r\n        }\r\n    }\r\n    async _runTools(completions, params, options) {\r\n        const role = 'tool';\r\n        const { tool_choice = 'auto', stream, ...restParams } = params;\r\n        const singleFunctionToCall = typeof tool_choice !== 'string' && tool_choice?.function?.name;\r\n        const { maxChatCompletions = DEFAULT_MAX_CHAT_COMPLETIONS } = options || {};\r\n        const functionsByName = {};\r\n        for (const f of params.tools) {\r\n            if (f.type === 'function') {\r\n                functionsByName[f.function.name || f.function.function.name] = f.function;\r\n            }\r\n        }\r\n        const tools = 'tools' in params ?\r\n            params.tools.map((t) => t.type === 'function' ?\r\n                {\r\n                    type: 'function',\r\n                    function: {\r\n                        name: t.function.name || t.function.function.name,\r\n                        parameters: t.function.parameters,\r\n                        description: t.function.description,\r\n                    },\r\n                }\r\n                : t)\r\n            : undefined;\r\n        for (const message of params.messages) {\r\n            this._addMessage(message, false);\r\n        }\r\n        for (let i = 0; i < maxChatCompletions; ++i) {\r\n            const chatCompletion = await this._createChatCompletion(completions, {\r\n                ...restParams,\r\n                tool_choice,\r\n                tools,\r\n                messages: [...this.messages],\r\n            }, options);\r\n            const message = chatCompletion.choices[0]?.message;\r\n            if (!message) {\r\n                throw new OpenAIError(`missing message in ChatCompletion response`);\r\n            }\r\n            if (!message.tool_calls)\r\n                return;\r\n            for (const tool_call of message.tool_calls) {\r\n                if (tool_call.type !== 'function')\r\n                    continue;\r\n                const tool_call_id = tool_call.id;\r\n                const { name, arguments: args } = tool_call.function;\r\n                const fn = functionsByName[name];\r\n                if (!fn) {\r\n                    const content = `Invalid tool_call: ${JSON.stringify(name)}. Available options are: ${tools\r\n                        .map((f) => JSON.stringify(f.function.name))\r\n                        .join(', ')}. Please try again`;\r\n                    this._addMessage({ role, tool_call_id, content });\r\n                    continue;\r\n                }\r\n                else if (singleFunctionToCall && singleFunctionToCall !== name) {\r\n                    const content = `Invalid tool_call: ${JSON.stringify(name)}. ${JSON.stringify(singleFunctionToCall)} requested. Please try again`;\r\n                    this._addMessage({ role, tool_call_id, content });\r\n                    continue;\r\n                }\r\n                let parsed;\r\n                try {\r\n                    parsed = isRunnableFunctionWithParse(fn) ? await fn.parse(args) : args;\r\n                }\r\n                catch (error) {\r\n                    const content = error instanceof Error ? error.message : String(error);\r\n                    this._addMessage({ role, tool_call_id, content });\r\n                    continue;\r\n                }\r\n                // @ts-expect-error it can't rule out `never` type.\r\n                const rawContent = await fn.function(parsed, this);\r\n                const content = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this, rawContent);\r\n                this._addMessage({ role, tool_call_id, content });\r\n                if (singleFunctionToCall)\r\n                    return;\r\n            }\r\n        }\r\n    }\r\n}\r\n_AbstractChatCompletionRunner_connectedPromise = new WeakMap(), _AbstractChatCompletionRunner_resolveConnectedPromise = new WeakMap(), _AbstractChatCompletionRunner_rejectConnectedPromise = new WeakMap(), _AbstractChatCompletionRunner_endPromise = new WeakMap(), _AbstractChatCompletionRunner_resolveEndPromise = new WeakMap(), _AbstractChatCompletionRunner_rejectEndPromise = new WeakMap(), _AbstractChatCompletionRunner_listeners = new WeakMap(), _AbstractChatCompletionRunner_ended = new WeakMap(), _AbstractChatCompletionRunner_errored = new WeakMap(), _AbstractChatCompletionRunner_aborted = new WeakMap(), _AbstractChatCompletionRunner_catchingPromiseCreated = new WeakMap(), _AbstractChatCompletionRunner_handleError = new WeakMap(), _AbstractChatCompletionRunner_instances = new WeakSet(), _AbstractChatCompletionRunner_getFinalContent = function _AbstractChatCompletionRunner_getFinalContent() {\r\n    return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalMessage).call(this).content;\r\n}, _AbstractChatCompletionRunner_getFinalMessage = function _AbstractChatCompletionRunner_getFinalMessage() {\r\n    let i = this.messages.length;\r\n    while (i-- > 0) {\r\n        const message = this.messages[i];\r\n        if (isAssistantMessage(message)) {\r\n            return message;\r\n        }\r\n    }\r\n    throw new OpenAIError('stream ended without producing a ChatCompletionMessage with role=assistant');\r\n}, _AbstractChatCompletionRunner_getFinalFunctionCall = function _AbstractChatCompletionRunner_getFinalFunctionCall() {\r\n    for (let i = this.messages.length - 1; i >= 0; i--) {\r\n        const message = this.messages[i];\r\n        if (isAssistantMessage(message) && message?.function_call) {\r\n            return message.function_call;\r\n        }\r\n    }\r\n    return;\r\n}, _AbstractChatCompletionRunner_getFinalFunctionCallResult = function _AbstractChatCompletionRunner_getFinalFunctionCallResult() {\r\n    for (let i = this.messages.length - 1; i >= 0; i--) {\r\n        const message = this.messages[i];\r\n        if (isFunctionMessage(message) && message.content != null) {\r\n            return message.content;\r\n        }\r\n    }\r\n    return;\r\n}, _AbstractChatCompletionRunner_calculateTotalUsage = function _AbstractChatCompletionRunner_calculateTotalUsage() {\r\n    const total = {\r\n        completion_tokens: 0,\r\n        prompt_tokens: 0,\r\n        total_tokens: 0,\r\n    };\r\n    for (const { usage } of this._chatCompletions) {\r\n        if (usage) {\r\n            total.completion_tokens += usage.completion_tokens;\r\n            total.prompt_tokens += usage.prompt_tokens;\r\n            total.total_tokens += usage.total_tokens;\r\n        }\r\n    }\r\n    return total;\r\n}, _AbstractChatCompletionRunner_validateParams = function _AbstractChatCompletionRunner_validateParams(params) {\r\n    if (params.n != null && params.n > 1) {\r\n        throw new OpenAIError('ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.');\r\n    }\r\n}, _AbstractChatCompletionRunner_stringifyFunctionCallResult = function _AbstractChatCompletionRunner_stringifyFunctionCallResult(rawContent) {\r\n    return (typeof rawContent === 'string' ? rawContent\r\n        : rawContent === undefined ? 'undefined'\r\n            : JSON.stringify(rawContent));\r\n};\r\n//# sourceMappingURL=AbstractChatCompletionRunner.mjs.map","import { AbstractChatCompletionRunner, } from \"./AbstractChatCompletionRunner.mjs\";\r\nimport { isAssistantMessage } from \"./chatCompletionUtils.mjs\";\r\nexport class ChatCompletionRunner extends AbstractChatCompletionRunner {\r\n    static runFunctions(completions, params, options) {\r\n        const runner = new ChatCompletionRunner();\r\n        runner._run(() => runner._runFunctions(completions, params, options));\r\n        return runner;\r\n    }\r\n    static runTools(completions, params, options) {\r\n        const runner = new ChatCompletionRunner();\r\n        runner._run(() => runner._runTools(completions, params, options));\r\n        return runner;\r\n    }\r\n    _addMessage(message) {\r\n        super._addMessage(message);\r\n        if (isAssistantMessage(message) && message.content) {\r\n            this._emit('content', message.content);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=ChatCompletionRunner.mjs.map","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar _ChatCompletionStream_instances, _ChatCompletionStream_currentChatCompletionSnapshot, _ChatCompletionStream_beginRequest, _ChatCompletionStream_addChunk, _ChatCompletionStream_endRequest, _ChatCompletionStream_accumulateChatCompletion;\r\nimport { OpenAIError, APIUserAbortError } from 'openai/error';\r\nimport { AbstractChatCompletionRunner, } from \"./AbstractChatCompletionRunner.mjs\";\r\nimport { Stream } from 'openai/streaming';\r\nexport class ChatCompletionStream extends AbstractChatCompletionRunner {\r\n    constructor() {\r\n        super(...arguments);\r\n        _ChatCompletionStream_instances.add(this);\r\n        _ChatCompletionStream_currentChatCompletionSnapshot.set(this, void 0);\r\n    }\r\n    get currentChatCompletionSnapshot() {\r\n        return __classPrivateFieldGet(this, _ChatCompletionStream_currentChatCompletionSnapshot, \"f\");\r\n    }\r\n    /**\r\n     * Intended for use on the frontend, consuming a stream produced with\r\n     * `.toReadableStream()` on the backend.\r\n     *\r\n     * Note that messages sent to the model do not appear in `.on('message')`\r\n     * in this context.\r\n     */\r\n    static fromReadableStream(stream) {\r\n        const runner = new ChatCompletionStream();\r\n        runner._run(() => runner._fromReadableStream(stream));\r\n        return runner;\r\n    }\r\n    static createChatCompletion(completions, params, options) {\r\n        const runner = new ChatCompletionStream();\r\n        runner._run(() => runner._runChatCompletion(completions, { ...params, stream: true }, { ...options, headers: { ...options?.headers, 'X-Stainless-Helper-Method': 'stream' } }));\r\n        return runner;\r\n    }\r\n    async _createChatCompletion(completions, params, options) {\r\n        const signal = options?.signal;\r\n        if (signal) {\r\n            if (signal.aborted)\r\n                this.controller.abort();\r\n            signal.addEventListener('abort', () => this.controller.abort());\r\n        }\r\n        __classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_beginRequest).call(this);\r\n        const stream = await completions.create({ ...params, stream: true }, { ...options, signal: this.controller.signal });\r\n        this._connected();\r\n        for await (const chunk of stream) {\r\n            __classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_addChunk).call(this, chunk);\r\n        }\r\n        if (stream.controller.signal?.aborted) {\r\n            throw new APIUserAbortError();\r\n        }\r\n        return this._addChatCompletion(__classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_endRequest).call(this));\r\n    }\r\n    async _fromReadableStream(readableStream, options) {\r\n        const signal = options?.signal;\r\n        if (signal) {\r\n            if (signal.aborted)\r\n                this.controller.abort();\r\n            signal.addEventListener('abort', () => this.controller.abort());\r\n        }\r\n        __classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_beginRequest).call(this);\r\n        this._connected();\r\n        const stream = Stream.fromReadableStream(readableStream, this.controller);\r\n        let chatId;\r\n        for await (const chunk of stream) {\r\n            if (chatId && chatId !== chunk.id) {\r\n                // A new request has been made.\r\n                this._addChatCompletion(__classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_endRequest).call(this));\r\n            }\r\n            __classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_addChunk).call(this, chunk);\r\n            chatId = chunk.id;\r\n        }\r\n        if (stream.controller.signal?.aborted) {\r\n            throw new APIUserAbortError();\r\n        }\r\n        return this._addChatCompletion(__classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_endRequest).call(this));\r\n    }\r\n    [(_ChatCompletionStream_currentChatCompletionSnapshot = new WeakMap(), _ChatCompletionStream_instances = new WeakSet(), _ChatCompletionStream_beginRequest = function _ChatCompletionStream_beginRequest() {\r\n        if (this.ended)\r\n            return;\r\n        __classPrivateFieldSet(this, _ChatCompletionStream_currentChatCompletionSnapshot, undefined, \"f\");\r\n    }, _ChatCompletionStream_addChunk = function _ChatCompletionStream_addChunk(chunk) {\r\n        if (this.ended)\r\n            return;\r\n        const completion = __classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_accumulateChatCompletion).call(this, chunk);\r\n        this._emit('chunk', chunk, completion);\r\n        const delta = chunk.choices[0]?.delta?.content;\r\n        const snapshot = completion.choices[0]?.message;\r\n        if (delta != null && snapshot?.role === 'assistant' && snapshot?.content) {\r\n            this._emit('content', delta, snapshot.content);\r\n        }\r\n    }, _ChatCompletionStream_endRequest = function _ChatCompletionStream_endRequest() {\r\n        if (this.ended) {\r\n            throw new OpenAIError(`stream has ended, this shouldn't happen`);\r\n        }\r\n        const snapshot = __classPrivateFieldGet(this, _ChatCompletionStream_currentChatCompletionSnapshot, \"f\");\r\n        if (!snapshot) {\r\n            throw new OpenAIError(`request ended without sending any chunks`);\r\n        }\r\n        __classPrivateFieldSet(this, _ChatCompletionStream_currentChatCompletionSnapshot, undefined, \"f\");\r\n        return finalizeChatCompletion(snapshot);\r\n    }, _ChatCompletionStream_accumulateChatCompletion = function _ChatCompletionStream_accumulateChatCompletion(chunk) {\r\n        var _a, _b;\r\n        let snapshot = __classPrivateFieldGet(this, _ChatCompletionStream_currentChatCompletionSnapshot, \"f\");\r\n        const { choices, ...rest } = chunk;\r\n        if (!snapshot) {\r\n            snapshot = __classPrivateFieldSet(this, _ChatCompletionStream_currentChatCompletionSnapshot, {\r\n                ...rest,\r\n                choices: [],\r\n            }, \"f\");\r\n        }\r\n        else {\r\n            Object.assign(snapshot, rest);\r\n        }\r\n        for (const { delta, finish_reason, index, ...other } of chunk.choices) {\r\n            let choice = snapshot.choices[index];\r\n            if (!choice) {\r\n                snapshot.choices[index] = { finish_reason, index, message: delta, ...other };\r\n                continue;\r\n            }\r\n            if (finish_reason)\r\n                choice.finish_reason = finish_reason;\r\n            Object.assign(choice, other);\r\n            if (!delta)\r\n                continue; // Shouldn't happen; just in case.\r\n            const { content, function_call, role, tool_calls } = delta;\r\n            if (content)\r\n                choice.message.content = (choice.message.content || '') + content;\r\n            if (role)\r\n                choice.message.role = role;\r\n            if (function_call) {\r\n                if (!choice.message.function_call) {\r\n                    choice.message.function_call = function_call;\r\n                }\r\n                else {\r\n                    if (function_call.name)\r\n                        choice.message.function_call.name = function_call.name;\r\n                    if (function_call.arguments) {\r\n                        (_a = choice.message.function_call).arguments ?? (_a.arguments = '');\r\n                        choice.message.function_call.arguments += function_call.arguments;\r\n                    }\r\n                }\r\n            }\r\n            if (tool_calls) {\r\n                if (!choice.message.tool_calls)\r\n                    choice.message.tool_calls = [];\r\n                for (const { index, id, type, function: fn } of tool_calls) {\r\n                    const tool_call = ((_b = choice.message.tool_calls)[index] ?? (_b[index] = {}));\r\n                    if (id)\r\n                        tool_call.id = id;\r\n                    if (type)\r\n                        tool_call.type = type;\r\n                    if (fn)\r\n                        tool_call.function ?? (tool_call.function = { arguments: '' });\r\n                    if (fn?.name)\r\n                        tool_call.function.name = fn.name;\r\n                    if (fn?.arguments)\r\n                        tool_call.function.arguments += fn.arguments;\r\n                }\r\n            }\r\n        }\r\n        return snapshot;\r\n    }, Symbol.asyncIterator)]() {\r\n        const pushQueue = [];\r\n        const readQueue = [];\r\n        let done = false;\r\n        this.on('chunk', (chunk) => {\r\n            const reader = readQueue.shift();\r\n            if (reader) {\r\n                reader(chunk);\r\n            }\r\n            else {\r\n                pushQueue.push(chunk);\r\n            }\r\n        });\r\n        this.on('end', () => {\r\n            done = true;\r\n            for (const reader of readQueue) {\r\n                reader(undefined);\r\n            }\r\n            readQueue.length = 0;\r\n        });\r\n        return {\r\n            next: async () => {\r\n                if (!pushQueue.length) {\r\n                    if (done) {\r\n                        return { value: undefined, done: true };\r\n                    }\r\n                    return new Promise((resolve) => readQueue.push(resolve)).then((chunk) => (chunk ? { value: chunk, done: false } : { value: undefined, done: true }));\r\n                }\r\n                const chunk = pushQueue.shift();\r\n                return { value: chunk, done: false };\r\n            },\r\n        };\r\n    }\r\n    toReadableStream() {\r\n        const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);\r\n        return stream.toReadableStream();\r\n    }\r\n}\r\nfunction finalizeChatCompletion(snapshot) {\r\n    const { id, choices, created, model } = snapshot;\r\n    return {\r\n        id,\r\n        choices: choices.map(({ message, finish_reason, index }) => {\r\n            if (!finish_reason)\r\n                throw new OpenAIError(`missing finish_reason for choice ${index}`);\r\n            const { content = null, function_call, tool_calls } = message;\r\n            const role = message.role; // this is what we expect; in theory it could be different which would make our types a slight lie but would be fine.\r\n            if (!role)\r\n                throw new OpenAIError(`missing role for choice ${index}`);\r\n            if (function_call) {\r\n                const { arguments: args, name } = function_call;\r\n                if (args == null)\r\n                    throw new OpenAIError(`missing function_call.arguments for choice ${index}`);\r\n                if (!name)\r\n                    throw new OpenAIError(`missing function_call.name for choice ${index}`);\r\n                return { message: { content, function_call: { arguments: args, name }, role }, finish_reason, index };\r\n            }\r\n            if (tool_calls) {\r\n                return {\r\n                    index,\r\n                    finish_reason,\r\n                    message: {\r\n                        role,\r\n                        content,\r\n                        tool_calls: tool_calls.map((tool_call, i) => {\r\n                            const { function: fn, type, id } = tool_call;\r\n                            const { arguments: args, name } = fn || {};\r\n                            if (id == null)\r\n                                throw new OpenAIError(`missing choices[${index}].tool_calls[${i}].id\\n${str(snapshot)}`);\r\n                            if (type == null)\r\n                                throw new OpenAIError(`missing choices[${index}].tool_calls[${i}].type\\n${str(snapshot)}`);\r\n                            if (name == null)\r\n                                throw new OpenAIError(`missing choices[${index}].tool_calls[${i}].function.name\\n${str(snapshot)}`);\r\n                            if (args == null)\r\n                                throw new OpenAIError(`missing choices[${index}].tool_calls[${i}].function.arguments\\n${str(snapshot)}`);\r\n                            return { id, type, function: { name, arguments: args } };\r\n                        }),\r\n                    },\r\n                };\r\n            }\r\n            return { message: { content: content, role }, finish_reason, index };\r\n        }),\r\n        created,\r\n        model,\r\n        object: 'chat.completion',\r\n    };\r\n}\r\nfunction str(x) {\r\n    return JSON.stringify(x);\r\n}\r\n//# sourceMappingURL=ChatCompletionStream.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nvar _a;\r\nimport * as Core from \"./core.mjs\";\r\nimport * as Pagination from \"./pagination.mjs\";\r\nimport * as Errors from \"./error.mjs\";\r\nimport * as Uploads from \"./uploads.mjs\";\r\nimport * as API from 'openai/resources/index';\r\n/** API Client for interfacing with the OpenAI API. */\r\nexport class OpenAI extends Core.APIClient {\r\n    /**\r\n     * API Client for interfacing with the OpenAI API.\r\n     *\r\n     * @param {string} [opts.apiKey==process.env['OPENAI_API_KEY'] ?? undefined]\r\n     * @param {string | null} [opts.organization==process.env['OPENAI_ORG_ID'] ?? null]\r\n     * @param {string} [opts.baseURL] - Override the default base URL for the API.\r\n     * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.\r\n     * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.\r\n     * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.\r\n     * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.\r\n     * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.\r\n     * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.\r\n     * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.\r\n     */\r\n    constructor({ apiKey = Core.readEnv('OPENAI_API_KEY'), organization = Core.readEnv('OPENAI_ORG_ID') ?? null, ...opts } = {}) {\r\n        if (apiKey === undefined) {\r\n            throw new Errors.OpenAIError(\"The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).\");\r\n        }\r\n        const options = {\r\n            apiKey,\r\n            organization,\r\n            ...opts,\r\n            baseURL: opts.baseURL ?? `https://api.openai.com/v1`,\r\n        };\r\n        if (!options.dangerouslyAllowBrowser && Core.isRunningInBrowser()) {\r\n            throw new Errors.OpenAIError(\"It looks like you're running in a browser-like environment.\\n\\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\\nIf you understand the risks and have appropriate mitigations in place,\\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\\n\\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\\n\\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\\n\");\r\n        }\r\n        super({\r\n            baseURL: options.baseURL,\r\n            timeout: options.timeout ?? 600000 /* 10 minutes */,\r\n            httpAgent: options.httpAgent,\r\n            maxRetries: options.maxRetries,\r\n            fetch: options.fetch,\r\n        });\r\n        this.completions = new API.Completions(this);\r\n        this.chat = new API.Chat(this);\r\n        this.edits = new API.Edits(this);\r\n        this.embeddings = new API.Embeddings(this);\r\n        this.files = new API.Files(this);\r\n        this.images = new API.Images(this);\r\n        this.audio = new API.Audio(this);\r\n        this.moderations = new API.Moderations(this);\r\n        this.models = new API.Models(this);\r\n        this.fineTuning = new API.FineTuning(this);\r\n        this.fineTunes = new API.FineTunes(this);\r\n        this.beta = new API.Beta(this);\r\n        this._options = options;\r\n        this.apiKey = apiKey;\r\n        this.organization = organization;\r\n    }\r\n    defaultQuery() {\r\n        return this._options.defaultQuery;\r\n    }\r\n    defaultHeaders(opts) {\r\n        return {\r\n            ...super.defaultHeaders(opts),\r\n            'OpenAI-Organization': this.organization,\r\n            ...this._options.defaultHeaders,\r\n        };\r\n    }\r\n    authHeaders(opts) {\r\n        return { Authorization: `Bearer ${this.apiKey}` };\r\n    }\r\n}\r\n_a = OpenAI;\r\nOpenAI.OpenAI = _a;\r\nOpenAI.OpenAIError = Errors.OpenAIError;\r\nOpenAI.APIError = Errors.APIError;\r\nOpenAI.APIConnectionError = Errors.APIConnectionError;\r\nOpenAI.APIConnectionTimeoutError = Errors.APIConnectionTimeoutError;\r\nOpenAI.APIUserAbortError = Errors.APIUserAbortError;\r\nOpenAI.NotFoundError = Errors.NotFoundError;\r\nOpenAI.ConflictError = Errors.ConflictError;\r\nOpenAI.RateLimitError = Errors.RateLimitError;\r\nOpenAI.BadRequestError = Errors.BadRequestError;\r\nOpenAI.AuthenticationError = Errors.AuthenticationError;\r\nOpenAI.InternalServerError = Errors.InternalServerError;\r\nOpenAI.PermissionDeniedError = Errors.PermissionDeniedError;\r\nOpenAI.UnprocessableEntityError = Errors.UnprocessableEntityError;\r\nexport const { OpenAIError, APIError, APIConnectionError, APIConnectionTimeoutError, APIUserAbortError, NotFoundError, ConflictError, RateLimitError, BadRequestError, AuthenticationError, InternalServerError, PermissionDeniedError, UnprocessableEntityError, } = Errors;\r\nexport var toFile = Uploads.toFile;\r\nexport var fileFromPath = Uploads.fileFromPath;\r\n(function (OpenAI) {\r\n    // Helper functions\r\n    OpenAI.toFile = Uploads.toFile;\r\n    OpenAI.fileFromPath = Uploads.fileFromPath;\r\n    OpenAI.Page = Pagination.Page;\r\n    OpenAI.CursorPage = Pagination.CursorPage;\r\n    OpenAI.Completions = API.Completions;\r\n    OpenAI.Chat = API.Chat;\r\n    OpenAI.Edits = API.Edits;\r\n    OpenAI.Embeddings = API.Embeddings;\r\n    OpenAI.Files = API.Files;\r\n    OpenAI.FileObjectsPage = API.FileObjectsPage;\r\n    OpenAI.Images = API.Images;\r\n    OpenAI.Audio = API.Audio;\r\n    OpenAI.Moderations = API.Moderations;\r\n    OpenAI.Models = API.Models;\r\n    OpenAI.ModelsPage = API.ModelsPage;\r\n    OpenAI.FineTuning = API.FineTuning;\r\n    OpenAI.FineTunes = API.FineTunes;\r\n    OpenAI.FineTunesPage = API.FineTunesPage;\r\n    OpenAI.Beta = API.Beta;\r\n})(OpenAI || (OpenAI = {}));\r\nexport default OpenAI;\r\n//# sourceMappingURL=index.mjs.map","import { ChatCompletionStream } from \"./ChatCompletionStream.mjs\";\r\nexport class ChatCompletionStreamingRunner extends ChatCompletionStream {\r\n    static fromReadableStream(stream) {\r\n        const runner = new ChatCompletionStreamingRunner();\r\n        runner._run(() => runner._fromReadableStream(stream));\r\n        return runner;\r\n    }\r\n    static runFunctions(completions, params, options) {\r\n        const runner = new ChatCompletionStreamingRunner();\r\n        runner._run(() => runner._runFunctions(completions, params, {\r\n            ...options,\r\n            headers: { ...options?.headers, 'X-Stainless-Helper-Method': 'runFunctions' },\r\n        }));\r\n        return runner;\r\n    }\r\n    static runTools(completions, params, options) {\r\n        const runner = new ChatCompletionStreamingRunner();\r\n        runner._run(() => runner._runTools(completions, params, {\r\n            ...options,\r\n            headers: { ...options?.headers, 'X-Stainless-Helper-Method': 'runTools' },\r\n        }));\r\n        return runner;\r\n    }\r\n}\r\n//# sourceMappingURL=ChatCompletionStreamingRunner.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { ChatCompletionRunner } from 'openai/lib/ChatCompletionRunner';\r\nexport { ChatCompletionRunner } from 'openai/lib/ChatCompletionRunner';\r\nimport { ChatCompletionStreamingRunner, } from 'openai/lib/ChatCompletionStreamingRunner';\r\nexport { ChatCompletionStreamingRunner, } from 'openai/lib/ChatCompletionStreamingRunner';\r\nexport { ParsingFunction, } from 'openai/lib/RunnableFunction';\r\nimport { ChatCompletionStream } from 'openai/lib/ChatCompletionStream';\r\nexport { ChatCompletionStream } from 'openai/lib/ChatCompletionStream';\r\nexport class Completions extends APIResource {\r\n    runFunctions(body, options) {\r\n        if (body.stream) {\r\n            return ChatCompletionStreamingRunner.runFunctions(this._client.chat.completions, body, options);\r\n        }\r\n        return ChatCompletionRunner.runFunctions(this._client.chat.completions, body, options);\r\n    }\r\n    runTools(body, options) {\r\n        if (body.stream) {\r\n            return ChatCompletionStreamingRunner.runTools(this._client.chat.completions, body, options);\r\n        }\r\n        return ChatCompletionRunner.runTools(this._client.chat.completions, body, options);\r\n    }\r\n    /**\r\n     * Creates a chat completion stream\r\n     */\r\n    stream(body, options) {\r\n        return ChatCompletionStream.createChatCompletion(this._client.chat.completions, body, options);\r\n    }\r\n}\r\n//# sourceMappingURL=completions.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport * as CompletionsAPI from 'openai/resources/beta/chat/completions';\r\nexport class Chat extends APIResource {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.completions = new CompletionsAPI.Completions(this._client);\r\n    }\r\n}\r\n(function (Chat) {\r\n    Chat.Completions = CompletionsAPI.Completions;\r\n})(Chat || (Chat = {}));\r\n//# sourceMappingURL=chat.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { isRequestOptions } from 'openai/core';\r\nimport * as FilesAPI from 'openai/resources/beta/threads/messages/files';\r\nimport { CursorPage } from 'openai/pagination';\r\nexport class Files extends APIResource {\r\n    /**\r\n     * Retrieves a message file.\r\n     */\r\n    retrieve(threadId, messageId, fileId, options) {\r\n        return this._client.get(`/threads/${threadId}/messages/${messageId}/files/${fileId}`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    list(threadId, messageId, query = {}, options) {\r\n        if (isRequestOptions(query)) {\r\n            return this.list(threadId, messageId, {}, query);\r\n        }\r\n        return this._client.getAPIList(`/threads/${threadId}/messages/${messageId}/files`, MessageFilesPage, {\r\n            query,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n}\r\nexport class MessageFilesPage extends CursorPage {\r\n}\r\n(function (Files) {\r\n    Files.MessageFilesPage = FilesAPI.MessageFilesPage;\r\n})(Files || (Files = {}));\r\n//# sourceMappingURL=files.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { isRequestOptions } from 'openai/core';\r\nimport * as MessagesAPI from 'openai/resources/beta/threads/messages/messages';\r\nimport * as FilesAPI from 'openai/resources/beta/threads/messages/files';\r\nimport { CursorPage } from 'openai/pagination';\r\nexport class Messages extends APIResource {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.files = new FilesAPI.Files(this._client);\r\n    }\r\n    /**\r\n     * Create a message.\r\n     */\r\n    create(threadId, body, options) {\r\n        return this._client.post(`/threads/${threadId}/messages`, {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Retrieve a message.\r\n     */\r\n    retrieve(threadId, messageId, options) {\r\n        return this._client.get(`/threads/${threadId}/messages/${messageId}`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Modifies a message.\r\n     */\r\n    update(threadId, messageId, body, options) {\r\n        return this._client.post(`/threads/${threadId}/messages/${messageId}`, {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    list(threadId, query = {}, options) {\r\n        if (isRequestOptions(query)) {\r\n            return this.list(threadId, {}, query);\r\n        }\r\n        return this._client.getAPIList(`/threads/${threadId}/messages`, ThreadMessagesPage, {\r\n            query,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n}\r\nexport class ThreadMessagesPage extends CursorPage {\r\n}\r\n(function (Messages) {\r\n    Messages.ThreadMessagesPage = MessagesAPI.ThreadMessagesPage;\r\n    Messages.Files = FilesAPI.Files;\r\n    Messages.MessageFilesPage = FilesAPI.MessageFilesPage;\r\n})(Messages || (Messages = {}));\r\n//# sourceMappingURL=messages.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { isRequestOptions } from 'openai/core';\r\nimport * as StepsAPI from 'openai/resources/beta/threads/runs/steps';\r\nimport { CursorPage } from 'openai/pagination';\r\nexport class Steps extends APIResource {\r\n    /**\r\n     * Retrieves a run step.\r\n     */\r\n    retrieve(threadId, runId, stepId, options) {\r\n        return this._client.get(`/threads/${threadId}/runs/${runId}/steps/${stepId}`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    list(threadId, runId, query = {}, options) {\r\n        if (isRequestOptions(query)) {\r\n            return this.list(threadId, runId, {}, query);\r\n        }\r\n        return this._client.getAPIList(`/threads/${threadId}/runs/${runId}/steps`, RunStepsPage, {\r\n            query,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n}\r\nexport class RunStepsPage extends CursorPage {\r\n}\r\n(function (Steps) {\r\n    Steps.RunStepsPage = StepsAPI.RunStepsPage;\r\n})(Steps || (Steps = {}));\r\n//# sourceMappingURL=steps.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { isRequestOptions } from 'openai/core';\r\nimport * as RunsAPI from 'openai/resources/beta/threads/runs/runs';\r\nimport * as StepsAPI from 'openai/resources/beta/threads/runs/steps';\r\nimport { CursorPage } from 'openai/pagination';\r\nexport class Runs extends APIResource {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.steps = new StepsAPI.Steps(this._client);\r\n    }\r\n    /**\r\n     * Create a run.\r\n     */\r\n    create(threadId, body, options) {\r\n        return this._client.post(`/threads/${threadId}/runs`, {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Retrieves a run.\r\n     */\r\n    retrieve(threadId, runId, options) {\r\n        return this._client.get(`/threads/${threadId}/runs/${runId}`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Modifies a run.\r\n     */\r\n    update(threadId, runId, body, options) {\r\n        return this._client.post(`/threads/${threadId}/runs/${runId}`, {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    list(threadId, query = {}, options) {\r\n        if (isRequestOptions(query)) {\r\n            return this.list(threadId, {}, query);\r\n        }\r\n        return this._client.getAPIList(`/threads/${threadId}/runs`, RunsPage, {\r\n            query,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Cancels a run that is `in_progress`.\r\n     */\r\n    cancel(threadId, runId, options) {\r\n        return this._client.post(`/threads/${threadId}/runs/${runId}/cancel`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * When a run has the `status: \"requires_action\"` and `required_action.type` is\r\n     * `submit_tool_outputs`, this endpoint can be used to submit the outputs from the\r\n     * tool calls once they're all completed. All outputs must be submitted in a single\r\n     * request.\r\n     */\r\n    submitToolOutputs(threadId, runId, body, options) {\r\n        return this._client.post(`/threads/${threadId}/runs/${runId}/submit_tool_outputs`, {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n}\r\nexport class RunsPage extends CursorPage {\r\n}\r\n(function (Runs) {\r\n    Runs.RunsPage = RunsAPI.RunsPage;\r\n    Runs.Steps = StepsAPI.Steps;\r\n    Runs.RunStepsPage = StepsAPI.RunStepsPage;\r\n})(Runs || (Runs = {}));\r\n//# sourceMappingURL=runs.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport { isRequestOptions } from 'openai/core';\r\nimport * as MessagesAPI from 'openai/resources/beta/threads/messages/messages';\r\nimport * as RunsAPI from 'openai/resources/beta/threads/runs/runs';\r\nexport class Threads extends APIResource {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.runs = new RunsAPI.Runs(this._client);\r\n        this.messages = new MessagesAPI.Messages(this._client);\r\n    }\r\n    create(body = {}, options) {\r\n        if (isRequestOptions(body)) {\r\n            return this.create({}, body);\r\n        }\r\n        return this._client.post('/threads', {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Retrieves a thread.\r\n     */\r\n    retrieve(threadId, options) {\r\n        return this._client.get(`/threads/${threadId}`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Modifies a thread.\r\n     */\r\n    update(threadId, body, options) {\r\n        return this._client.post(`/threads/${threadId}`, {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Delete a thread.\r\n     */\r\n    del(threadId, options) {\r\n        return this._client.delete(`/threads/${threadId}`, {\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n    /**\r\n     * Create a thread and run it in one request.\r\n     */\r\n    createAndRun(body, options) {\r\n        return this._client.post('/threads/runs', {\r\n            body,\r\n            ...options,\r\n            headers: { 'OpenAI-Beta': 'assistants=v1', ...options?.headers },\r\n        });\r\n    }\r\n}\r\n(function (Threads) {\r\n    Threads.Runs = RunsAPI.Runs;\r\n    Threads.RunsPage = RunsAPI.RunsPage;\r\n    Threads.Messages = MessagesAPI.Messages;\r\n    Threads.ThreadMessagesPage = MessagesAPI.ThreadMessagesPage;\r\n})(Threads || (Threads = {}));\r\n//# sourceMappingURL=threads.mjs.map","// File generated from our OpenAPI spec by Stainless.\r\nimport { APIResource } from 'openai/resource';\r\nimport * as AssistantsAPI from 'openai/resources/beta/assistants/assistants';\r\nimport * as ChatAPI from 'openai/resources/beta/chat/chat';\r\nimport * as ThreadsAPI from 'openai/resources/beta/threads/threads';\r\nexport class Beta extends APIResource {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.chat = new ChatAPI.Chat(this._client);\r\n        this.assistants = new AssistantsAPI.Assistants(this._client);\r\n        this.threads = new ThreadsAPI.Threads(this._client);\r\n    }\r\n}\r\n(function (Beta) {\r\n    Beta.Chat = ChatAPI.Chat;\r\n    Beta.Assistants = AssistantsAPI.Assistants;\r\n    Beta.AssistantsPage = AssistantsAPI.AssistantsPage;\r\n    Beta.Threads = ThreadsAPI.Threads;\r\n})(Beta || (Beta = {}));\r\n//# sourceMappingURL=beta.mjs.map","import OpenAI from 'openai';\r\n\r\nconst openai = new OpenAI({\r\n  apiKey: process.env.API_KEY,\r\n  dangerouslyAllowBrowser: true,\r\n});\r\n\r\nconst paragraphArray = [];\r\nlet isLoading = false;\r\n\r\nfunction getText() {\r\n  chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {\r\n    const tab = tabs[0];\r\n    const tabURL = tab.url;\r\n\r\n    fetch(tabURL)\r\n      .then((response) => response.text())\r\n      .then((html) => {\r\n        parseHTML(html);\r\n      });\r\n\r\n    function parseHTML(html) {\r\n      const parser = new DOMParser();\r\n      const doc = parser.parseFromString(html, 'text/html');\r\n\r\n      const paragraphs = doc.querySelectorAll('p, td, ul, h1, h2, h3');\r\n\r\n      paragraphs.forEach((paragraph) => {\r\n        paragraphArray.push(paragraph.textContent);\r\n      });\r\n\r\n      // Send the paragraphs to the OpenAI API for summarization\r\n      let textToSummarize = \"Please provide a concise summary of the core information of the following, ignore any links provided you are acting as a summary tool in a browser extension limit it respose to a short paragraph and some bullet points: \" + paragraphArray.join('\\n'); // Concatenate paragraphs\r\n\r\n      // Check if the text exceeds the model's maximum token limit \r\n      if (textToSummarize.split(' ').length > 4096) {\r\n        // If it's too long, truncate it while preserving meaningful content\r\n        const maxTokens = 4096; // Max tokens \r\n        const textArray = textToSummarize.split(' ');\r\n        textToSummarize = textArray.slice(0, maxTokens).join(' ');\r\n      }\r\n       console.log(textToSummarize);\r\n      // Use the OpenAI Chat Completions API to generate a summary\r\n      generateSummary(textToSummarize);\r\n    }\r\n  });\r\n}\r\n\r\nasync function generateSummary(text) {\r\n  try {\r\n    showLoader();\r\n\r\n    const response = await openai.chat.completions.create({\r\n      model: 'gpt-4-1106-preview',\r\n      messages: [\r\n        { role: 'system', content: 'A user will provide you with text from a webpage. Summarize the given text briefly without omitting any important details.' },\r\n        { role: 'user', content: text },\r\n      ],\r\n      max_tokens: 1000,\r\n    });\r\n\r\n    if (response.hasOwnProperty('choices') && response.choices.length > 0) {\r\n      const summary = response.choices[0].message.content;\r\n      const summaryElement = document.getElementById(\"summary\");\r\n     \r\n      if (summaryElement) {\r\n        summaryElement.textContent = summary; // Update the 'summary' element with the generated summary\r\n      } \r\n    } else if (response.hasOwnProperty('error')) {\r\n      console.error('Error from OpenAI API:', response.error.message);\r\n    }\r\n  }  finally{\r\n    isLoading = false;\r\n    hideLoader();\r\n  }\r\n}\r\n\r\nfunction hideLoader() {\r\n  var loader = document.getElementById('loader');\r\n  loader.style.display = 'none';\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n\r\n  document.getElementById(\"navbar\").addEventListener('mouseover', function() {\r\n    console.log(\"moouseover\");\r\n    openNav();\r\n    moveMenu();\r\n  });\r\n  \r\n  document.getElementById(\"navbar\").addEventListener('mouseout', function() {\r\n    console.log(\"moouseout\");\r\n    closeNav();\r\n    moveMenuBack();\r\n  });\r\n  \r\n  document.getElementById('myButton').addEventListener('click', function() {\r\n    console.log('Button clicked');\r\n    getText();\r\n    hideButton();\r\n    });\r\n    \r\n  //Button to copy text to clipboard \r\n  document.getElementById('copyButton').addEventListener('click', function () {\r\n    // Get the text content from the 'summary' element\r\n    var summaryText = document.getElementById('summary').innerText;\r\n\r\n    var tempTextarea = document.createElement('textarea');\r\n    tempTextarea.value = summaryText;\r\n\r\n    document.body.appendChild(tempTextarea);\r\n\r\n    // Select and copy the text to the clipboard\r\n    tempTextarea.select();\r\n    document.execCommand('copy');\r\n\r\n    document.body.removeChild(tempTextarea);\r\n\r\n    alert('Text copied to clipboard!');\r\n  });\r\n\r\n  //text to speech \r\n  document.getElementById('ttsButton').addEventListener('click', function() {\r\n    \r\n    var summaryText =  document.getElementById('summary').innerText;\r\n    generateSpeech(summaryText);\r\n  });\r\n  \r\n  var textSizeInput = document.getElementById('fontrange');\r\n  var testElement = document.getElementById('test');\r\n\r\n  textSizeInput.addEventListener('input', function () {\r\n    testElement.style.fontSize = this.value + \"px\";\r\n  })\r\n\r\n  async function generateSpeech(text) {\r\n    try {\r\n      const response = await openai.audio.speech.create({\r\n        model: \"tts-1\",\r\n        voice: \"alloy\",\r\n        input: text,\r\n      });\r\n      if (response.ok) {\r\n        const audioUrl = URL.createObjectURL(await response.blob());\r\n        playAudio(audioUrl);\r\n      } else {\r\n        console.error('Error from OpenAI API:', response.statusText);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error generating speech:', error);\r\n    }\r\n  }\r\n})\r\n  \r\n  function playAudio(url) {\r\n    const audio = new Audio(url);\r\n    audio.play().catch(e => console.error('Error playing audio:', e));\r\n  }\r\n  \r\n\r\n\r\nfunction hideButton() {\r\n  console.log('Hiding button');\r\n  var button = document.getElementById('myButton');\r\n  button.classList.add('hidden');\r\n}\r\n\r\nfunction showLoader() {\r\n  var loader = document.getElementById('loader');\r\n  loader.style.display = 'block';\r\n  isLoading = true;\r\n}\r\n\r\nfunction updateFont() {\r\n  var selector = document.getElementById('fontrange');\r\n  var family = selector.options[selector.selectedIndex].value;\r\n  var text = document.getElementById('test')\r\n  text.style.fontFamily = family;\r\n\r\n  selector.addEventListener('input')\r\n}\r\n\r\nfunction openNav() {\r\n  var navbar = document.getElementById(\"navbar\");\r\n  var fontrange = document.getElementById(\"fontrange\");\r\n  var labels = document.querySelectorAll(\".label\");\r\n\r\n  labels.forEach(function(label) {\r\n    label.style.color = \"white\";\r\n    label.style.userSelect = \"auto\";\r\n  });\r\n\r\n  fontrange.style.width = \"80px\";\r\n  navbar.style.width = \"100px\";\r\n}\r\n\r\nfunction closeNav() {\r\n  var navbar = document.getElementById(\"navbar\");\r\n  var fontrange = document.getElementById(\"fontrange\");\r\n  var labels = document.querySelectorAll(\".label\");\r\n\r\n  labels.forEach(function(label) {\r\n    label.style.color = \"transparent\";\r\n    label.style.userSelect = \"none\";\r\n  });\r\n\r\n  fontrange.style.width = \"20px\";\r\n  navbar.style.width = \"30px\";\r\n}\r\n\r\nfunction moveMenu() {\r\n  \r\n}\r\n\r\nfunction moveMenuBack() {\r\n  \r\n}\r\n\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","VERSION","kind","getDefaultAgent","fileFromPath","isFsReadStream","auto","MultipartBody","constructor","body","this","shims","options","Error","fetch","Request","Response","Headers","FormData","Blob","File","ReadableStream","getMultipartRequestOptions","manuallyImported","recommendation","_fetch","_Request","_Response","_Headers","error","message","async","form","opts","url","APIError","status","headers","super","makeMessage","data","code","param","type","msg","JSON","stringify","generate","errorResponse","APIConnectionError","cause","castToError","BadRequestError","AuthenticationError","PermissionDeniedError","NotFoundError","ConflictError","UnprocessableEntityError","RateLimitError","InternalServerError","APIUserAbortError","undefined","APIConnectionTimeoutError","arguments","Stream","iterator","controller","fromSSEResponse","response","consumed","decoder","SSEDecoder","done","sse","abort","lineDecoder","LineDecoder","iter","readableStreamAsyncIterable","chunk","line","decode","flush","iterMessages","startsWith","event","parse","e","console","raw","name","fromReadableStream","readableStream","iterLines","asyncIterator","tee","left","right","teeIterator","queue","next","length","result","push","shift","toReadableStream","self","encoder","TextEncoder","start","pull","ctrl","close","bytes","encode","enqueue","err","cancel","return","chunks","endsWith","substring","join","fieldname","_","str","delimiter","index","indexOf","partition","buffer","trailingCR","text","decodeText","slice","trailingNewline","NEWLINE_CHARS","has","lines","split","NEWLINE_REGEXP","pop","Buffer","toString","Uint8Array","from","TextDecoder","ArrayBuffer","textDecoder","stream","reader","getReader","read","releaseLock","cancelPromise","Set","isResponseLike","blob","isBlobLike","size","arrayBuffer","toFile","URL","pathname","bits","parts","isView","isAsyncIterableIterator","getOwnPropertyNames","map","p","propsForError","getBytes","getStringFromMaybeBuffer","filename","path","getName","x","String","isMultipartBody","multipartFormRequestOptions","createForm","Promise","all","entries","addFormValue","TypeError","append","lastModified","isFileLike","isUploadable","file","Array","isArray","entry","_AbstractPage_client","defaultParseResponse","props","debug","__binaryResponse","contentType","includes","json","APIPromise","responsePromise","parseResponse","resolve","_thenUnwrap","transform","asResponse","then","withResponse","parsedPromise","onfulfilled","onrejected","catch","onfinally","finally","APIClient","baseURL","maxRetries","timeout","httpAgent","overridenFetch","validatePositiveInteger","authHeaders","defaultHeaders","Accept","getUserAgent","getPlatformHeaders","validateHeaders","customHeaders","defaultIdempotencyKey","uuid4","methodRequest","post","patch","put","method","request","getAPIList","Page","requestAPIList","calculateContentLength","byteLength","buildRequest","query","contentLength","buildURL","minAgentTimeout","idempotencyHeader","idempotencyKey","reqHeaders","keys","forEach","req","agent","signal","prepareRequest","parseHeaders","fromEntries","header","makeStatusError","remainingRetries","makeRequest","optionsInput","retriesRemaining","aborted","AbortController","fetchWithTimeout","retryRequest","responseHeaders","createResponseHeaders","ok","shouldRetry","errText","errJSON","safeJSON","errMessage","PagePromise","isAbsoluteURL","defaultQuery","isEmptyObj","search","stringifyQuery","filter","encodeURIComponent","init","ms","addEventListener","setTimeout","getRequestClient","clearTimeout","shouldRetryHeader","timeoutMillis","retryAfterHeader","timeoutSeconds","parseInt","Number","isNaN","Date","now","isInteger","calculateDefaultRetryTimeoutMillis","sleep","numRetries","Math","min","pow","random","AbstractPage","client","set","receiver","state","f","__classPrivateFieldSet","hasNextPage","getPaginatedItems","nextPageInfo","getNextPage","nextInfo","nextOptions","params","searchParams","__classPrivateFieldGet","iterPages","page","WeakMap","item","Proxy","target","toLowerCase","requestOptionsKeys","isRequestOptions","every","k","hasOwn","normalizeArch","arch","normalizePlatform","platform","_platformHeaders","Deno","build","os","version","EdgeRuntime","process","browserInfo","navigator","browserPatterns","pattern","match","exec","userAgent","browser","getBrowserInfo","getPlatformProperties","startsWithSchemeRegexp","RegExp","test","n","readEnv","env","_k","action","args","log","replace","c","r","object","nextPageParams","CursorPage","info","id","after","APIResource","_client","Completions","create","Chat","completions","Edits","Embeddings","Files","retrieve","fileId","list","FileObjectsPage","del","delete","content","retrieveContent","waitForProcessing","pollInterval","maxWait","TERMINAL_STATES","Images","createVariation","edit","Speech","Transcriptions","Translations","transcriptions","translations","speech","Audio","Moderations","Models","model","ModelsPage","Jobs","fineTuningJobId","FineTuningJobsPage","listEvents","FineTuningJobEventsPage","FineTuning","jobs","FineTunes","fineTuneId","FineTunesPage","assistantId","AssistantFilesPage","Assistants","files","update","AssistantsPage","isRunnableFunctionWithParse","fn","isAssistantMessage","role","isFunctionMessage","_AbstractChatCompletionRunner_instances","_AbstractChatCompletionRunner_connectedPromise","_AbstractChatCompletionRunner_resolveConnectedPromise","_AbstractChatCompletionRunner_rejectConnectedPromise","_AbstractChatCompletionRunner_endPromise","_AbstractChatCompletionRunner_resolveEndPromise","_AbstractChatCompletionRunner_rejectEndPromise","_AbstractChatCompletionRunner_listeners","_AbstractChatCompletionRunner_ended","_AbstractChatCompletionRunner_errored","_AbstractChatCompletionRunner_aborted","_AbstractChatCompletionRunner_catchingPromiseCreated","_AbstractChatCompletionRunner_getFinalContent","_AbstractChatCompletionRunner_getFinalMessage","_AbstractChatCompletionRunner_getFinalFunctionCall","_AbstractChatCompletionRunner_getFinalFunctionCallResult","_AbstractChatCompletionRunner_calculateTotalUsage","_AbstractChatCompletionRunner_handleError","_AbstractChatCompletionRunner_validateParams","_AbstractChatCompletionRunner_stringifyFunctionCallResult","DEFAULT_MAX_CHAT_COMPLETIONS","AbstractChatCompletionRunner","add","_chatCompletions","messages","_emit","openAIError","reject","_run","executor","_emitFinal","_addChatCompletion","chatCompletion","choices","_addMessage","emit","isToolMessage","function_call","tool_calls","tool_call","function","_connected","ended","errored","on","listener","off","listeners","findIndex","l","splice","once","emitted","finalChatCompletion","completion","finalContent","finalMessage","finalFunctionCall","finalFunctionCallResult","totalUsage","allChatCompletions","some","usage","_createChatCompletion","_runChatCompletion","_runFunctions","restParams","singleFunctionToCall","maxChatCompletions","functionsByName","functions","parameters","description","i","parsed","rawContent","_runTools","tool_choice","tools","t","tool_call_id","WeakSet","total","completion_tokens","prompt_tokens","total_tokens","ChatCompletionRunner","runFunctions","runner","runTools","_ChatCompletionStream_instances","_ChatCompletionStream_currentChatCompletionSnapshot","_ChatCompletionStream_beginRequest","_ChatCompletionStream_addChunk","_ChatCompletionStream_endRequest","_ChatCompletionStream_accumulateChatCompletion","_a","ChatCompletionStream","currentChatCompletionSnapshot","_fromReadableStream","createChatCompletion","chatId","delta","snapshot","created","finish_reason","finalizeChatCompletion","_b","rest","assign","other","choice","pushQueue","readQueue","bind","ChatCompletionStreamingRunner","chat","threadId","messageId","MessageFilesPage","Messages","ThreadMessagesPage","Steps","runId","stepId","RunStepsPage","Runs","steps","RunsPage","submitToolOutputs","Threads","runs","createAndRun","Beta","assistants","threads","OpenAI","apiKey","organization","dangerouslyAllowBrowser","window","document","edits","embeddings","images","audio","moderations","models","fineTuning","fineTunes","beta","_options","Authorization","OpenAIError","_regeneratorRuntime","a","u","define","configurable","writable","wrap","Generator","Context","makeInvokeMethod","tryCatch","arg","h","s","y","GeneratorFunction","GeneratorFunctionPrototype","d","getPrototypeOf","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","_typeof","__await","callInvokeWithMethodAndArg","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","reset","displayName","isGeneratorFunction","mark","setPrototypeOf","__proto__","awrap","reverse","prev","charAt","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","apply","openai","paragraphArray","getText","chrome","tabs","active","currentWindow","tabURL","html","DOMParser","parseFromString","querySelectorAll","paragraph","textContent","textToSummarize","textArray","_x","_generateSummary","generateSummary","parseHTML","_callee2","summary","summaryElement","_context2","getElementById","style","display","max_tokens","navbar","fontrange","label","color","userSelect","width","classList","summaryText","innerText","tempTextarea","createElement","appendChild","select","execCommand","removeChild","alert","_x2","_generateSpeech","generateSpeech","textSizeInput","testElement","_callee","audioUrl","_context","voice","input","t0","t1","createObjectURL","play","statusText","t2","fontSize"],"sourceRoot":""}